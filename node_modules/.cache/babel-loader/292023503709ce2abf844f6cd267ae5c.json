{"ast":null,"code":"import { __awaiter, __generator, __spreadArrays } from \"tslib\";\nimport { r as registerInstance, e as createEvent, i as getElement, h, H as Host } from './index-44bf8136.js';\nimport { b as getIonMode } from './ionic-global-837be8f3.js';\nimport { e as debounce } from './helpers-5c745fbd.js';\nimport { o as openURL, c as createColorClasses } from './theme-3f0b0c04.js';\n\nvar Route =\n/** @class */\nfunction () {\n  function Route(hostRef) {\n    registerInstance(this, hostRef);\n    this.ionRouteDataChanged = createEvent(this, \"ionRouteDataChanged\", 7);\n    /**\n     * Relative path that needs to match in order for this route to apply.\n     *\n     * Accepts paths similar to expressjs so that you can define parameters\n     * in the url /foo/:bar where bar would be available in incoming props.\n     */\n\n    this.url = '';\n  }\n\n  Route.prototype.onUpdate = function (newValue) {\n    this.ionRouteDataChanged.emit(newValue);\n  };\n\n  Route.prototype.onComponentProps = function (newValue, oldValue) {\n    if (newValue === oldValue) {\n      return;\n    }\n\n    var keys1 = newValue ? Object.keys(newValue) : [];\n    var keys2 = oldValue ? Object.keys(oldValue) : [];\n\n    if (keys1.length !== keys2.length) {\n      this.onUpdate(newValue);\n      return;\n    }\n\n    for (var _i = 0, keys1_1 = keys1; _i < keys1_1.length; _i++) {\n      var key = keys1_1[_i];\n\n      if (newValue[key] !== oldValue[key]) {\n        this.onUpdate(newValue);\n        return;\n      }\n    }\n  };\n\n  Route.prototype.connectedCallback = function () {\n    this.ionRouteDataChanged.emit();\n  };\n\n  Object.defineProperty(Route, \"watchers\", {\n    get: function get() {\n      return {\n        \"url\": [\"onUpdate\"],\n        \"component\": [\"onUpdate\"],\n        \"componentProps\": [\"onComponentProps\"]\n      };\n    },\n    enumerable: false,\n    configurable: true\n  });\n  return Route;\n}();\n\nvar RouteRedirect =\n/** @class */\nfunction () {\n  function RouteRedirect(hostRef) {\n    registerInstance(this, hostRef);\n    this.ionRouteRedirectChanged = createEvent(this, \"ionRouteRedirectChanged\", 7);\n  }\n\n  RouteRedirect.prototype.propDidChange = function () {\n    this.ionRouteRedirectChanged.emit();\n  };\n\n  RouteRedirect.prototype.connectedCallback = function () {\n    this.ionRouteRedirectChanged.emit();\n  };\n\n  Object.defineProperty(RouteRedirect, \"watchers\", {\n    get: function get() {\n      return {\n        \"from\": [\"propDidChange\"],\n        \"to\": [\"propDidChange\"]\n      };\n    },\n    enumerable: false,\n    configurable: true\n  });\n  return RouteRedirect;\n}();\n\nvar ROUTER_INTENT_NONE = 'root';\nvar ROUTER_INTENT_FORWARD = 'forward';\nvar ROUTER_INTENT_BACK = 'back';\n\nvar generatePath = function generatePath(segments) {\n  var path = segments.filter(function (s) {\n    return s.length > 0;\n  }).join('/');\n  return '/' + path;\n};\n\nvar chainToPath = function chainToPath(chain) {\n  var path = [];\n\n  for (var _i = 0, chain_1 = chain; _i < chain_1.length; _i++) {\n    var route = chain_1[_i];\n\n    for (var _a = 0, _b = route.path; _a < _b.length; _a++) {\n      var segment = _b[_a];\n\n      if (segment[0] === ':') {\n        var param = route.params && route.params[segment.slice(1)];\n\n        if (!param) {\n          return null;\n        }\n\n        path.push(param);\n      } else if (segment !== '') {\n        path.push(segment);\n      }\n    }\n  }\n\n  return path;\n};\n\nvar writePath = function writePath(history, root, useHash, path, direction, state, queryString) {\n  var url = generatePath(__spreadArrays(parsePath(root), path));\n\n  if (useHash) {\n    url = '#' + url;\n  }\n\n  if (queryString !== undefined) {\n    url = url + '?' + queryString;\n  }\n\n  if (direction === ROUTER_INTENT_FORWARD) {\n    history.pushState(state, '', url);\n  } else {\n    history.replaceState(state, '', url);\n  }\n};\n\nvar removePrefix = function removePrefix(prefix, path) {\n  if (prefix.length > path.length) {\n    return null;\n  }\n\n  if (prefix.length <= 1 && prefix[0] === '') {\n    return path;\n  }\n\n  for (var i = 0; i < prefix.length; i++) {\n    if (prefix[i].length > 0 && prefix[i] !== path[i]) {\n      return null;\n    }\n  }\n\n  if (path.length === prefix.length) {\n    return [''];\n  }\n\n  return path.slice(prefix.length);\n};\n\nvar readPath = function readPath(loc, root, useHash) {\n  var pathname = loc.pathname;\n\n  if (useHash) {\n    var hash = loc.hash;\n    pathname = hash[0] === '#' ? hash.slice(1) : '';\n  }\n\n  var prefix = parsePath(root);\n  var path = parsePath(pathname);\n  return removePrefix(prefix, path);\n};\n\nvar parsePath = function parsePath(path) {\n  if (path == null) {\n    return [''];\n  }\n\n  var removeQueryString = path.split('?')[0];\n  var segments = removeQueryString.split('/').map(function (s) {\n    return s.trim();\n  }).filter(function (s) {\n    return s.length > 0;\n  });\n\n  if (segments.length === 0) {\n    return [''];\n  } else {\n    return segments;\n  }\n};\n\nvar printRoutes = function printRoutes(routes) {\n  console.group(\"[ion-core] ROUTES[\" + routes.length + \"]\");\n\n  var _loop_1 = function _loop_1(chain) {\n    var path = [];\n    chain.forEach(function (r) {\n      return path.push.apply(path, r.path);\n    });\n    var ids = chain.map(function (r) {\n      return r.id;\n    });\n    console.debug(\"%c \" + generatePath(path), 'font-weight: bold; padding-left: 20px', '=>\\t', \"(\" + ids.join(', ') + \")\");\n  };\n\n  for (var _i = 0, routes_1 = routes; _i < routes_1.length; _i++) {\n    var chain = routes_1[_i];\n\n    _loop_1(chain);\n  }\n\n  console.groupEnd();\n};\n\nvar printRedirects = function printRedirects(redirects) {\n  console.group(\"[ion-core] REDIRECTS[\" + redirects.length + \"]\");\n\n  for (var _i = 0, redirects_1 = redirects; _i < redirects_1.length; _i++) {\n    var redirect = redirects_1[_i];\n\n    if (redirect.to) {\n      console.debug('FROM: ', \"$c \" + generatePath(redirect.from), 'font-weight: bold', ' TO: ', \"$c \" + generatePath(redirect.to), 'font-weight: bold');\n    }\n  }\n\n  console.groupEnd();\n};\n\nvar writeNavState = function writeNavState(root, chain, direction, index, changed, animation) {\n  if (changed === void 0) {\n    changed = false;\n  }\n\n  return __awaiter(void 0, void 0, void 0, function () {\n    var outlet, route, result, e_1;\n    return __generator(this, function (_a) {\n      switch (_a.label) {\n        case 0:\n          _a.trys.push([0, 6,, 7]);\n\n          outlet = searchNavNode(root); // make sure we can continue interacting the DOM, otherwise abort\n\n          if (index >= chain.length || !outlet) {\n            return [2\n            /*return*/\n            , changed];\n          }\n\n          return [4\n          /*yield*/\n          , outlet.componentOnReady()];\n\n        case 1:\n          _a.sent();\n\n          route = chain[index];\n          return [4\n          /*yield*/\n          , outlet.setRouteId(route.id, route.params, direction, animation)];\n\n        case 2:\n          result = _a.sent(); // if the outlet changed the page, reset navigation to neutral (no direction)\n          // this means nested outlets will not animate\n\n          if (result.changed) {\n            direction = ROUTER_INTENT_NONE;\n            changed = true;\n          }\n\n          return [4\n          /*yield*/\n          , writeNavState(result.element, chain, direction, index + 1, changed, animation)];\n\n        case 3:\n          // recursively set nested outlets\n          changed = _a.sent();\n          if (!result.markVisible) return [3\n          /*break*/\n          , 5];\n          return [4\n          /*yield*/\n          , result.markVisible()];\n\n        case 4:\n          _a.sent();\n\n          _a.label = 5;\n\n        case 5:\n          return [2\n          /*return*/\n          , changed];\n\n        case 6:\n          e_1 = _a.sent();\n          console.error(e_1);\n          return [2\n          /*return*/\n          , false];\n\n        case 7:\n          return [2\n          /*return*/\n          ];\n      }\n    });\n  });\n};\n\nvar readNavState = function readNavState(root) {\n  return __awaiter(void 0, void 0, void 0, function () {\n    var ids, outlet, node, id;\n    return __generator(this, function (_a) {\n      switch (_a.label) {\n        case 0:\n          ids = [];\n          node = root;\n          _a.label = 1;\n\n        case 1:\n          if (!true) return [3\n          /*break*/\n          , 5];\n          outlet = searchNavNode(node);\n          if (!outlet) return [3\n          /*break*/\n          , 3];\n          return [4\n          /*yield*/\n          , outlet.getRouteId()];\n\n        case 2:\n          id = _a.sent();\n\n          if (id) {\n            node = id.element;\n            id.element = undefined;\n            ids.push(id);\n          } else {\n            return [3\n            /*break*/\n            , 5];\n          }\n\n          return [3\n          /*break*/\n          , 4];\n\n        case 3:\n          return [3\n          /*break*/\n          , 5];\n\n        case 4:\n          return [3\n          /*break*/\n          , 1];\n\n        case 5:\n          return [2\n          /*return*/\n          , {\n            ids: ids,\n            outlet: outlet\n          }];\n      }\n    });\n  });\n};\n\nvar waitUntilNavNode = function waitUntilNavNode() {\n  if (searchNavNode(document.body)) {\n    return Promise.resolve();\n  }\n\n  return new Promise(function (resolve) {\n    window.addEventListener('ionNavWillLoad', resolve, {\n      once: true\n    });\n  });\n};\n\nvar QUERY = ':not([no-router]) ion-nav, :not([no-router]) ion-tabs, :not([no-router]) ion-router-outlet';\n\nvar searchNavNode = function searchNavNode(root) {\n  if (!root) {\n    return undefined;\n  }\n\n  if (root.matches(QUERY)) {\n    return root;\n  }\n\n  var outlet = root.querySelector(QUERY);\n  return outlet ? outlet : undefined;\n};\n\nvar matchesRedirect = function matchesRedirect(input, route) {\n  var from = route.from,\n      to = route.to;\n\n  if (to === undefined) {\n    return false;\n  }\n\n  if (from.length > input.length) {\n    return false;\n  }\n\n  for (var i = 0; i < from.length; i++) {\n    var expected = from[i];\n\n    if (expected === '*') {\n      return true;\n    }\n\n    if (expected !== input[i]) {\n      return false;\n    }\n  }\n\n  return from.length === input.length;\n};\n\nvar routeRedirect = function routeRedirect(path, routes) {\n  return routes.find(function (route) {\n    return matchesRedirect(path, route);\n  });\n};\n\nvar matchesIDs = function matchesIDs(ids, chain) {\n  var len = Math.min(ids.length, chain.length);\n  var i = 0;\n\n  for (; i < len; i++) {\n    if (ids[i].toLowerCase() !== chain[i].id) {\n      break;\n    }\n  }\n\n  return i;\n};\n\nvar matchesPath = function matchesPath(inputPath, chain) {\n  var segments = new RouterSegments(inputPath);\n  var matchesDefault = false;\n  var allparams;\n\n  for (var i = 0; i < chain.length; i++) {\n    var path = chain[i].path;\n\n    if (path[0] === '') {\n      matchesDefault = true;\n    } else {\n      for (var _i = 0, path_1 = path; _i < path_1.length; _i++) {\n        var segment = path_1[_i];\n        var data = segments.next(); // data param\n\n        if (segment[0] === ':') {\n          if (data === '') {\n            return null;\n          }\n\n          allparams = allparams || [];\n          var params = allparams[i] || (allparams[i] = {});\n          params[segment.slice(1)] = data;\n        } else if (data !== segment) {\n          return null;\n        }\n      }\n\n      matchesDefault = false;\n    }\n  }\n\n  var matches = matchesDefault ? matchesDefault === (segments.next() === '') : true;\n\n  if (!matches) {\n    return null;\n  }\n\n  if (allparams) {\n    return chain.map(function (route, i) {\n      return {\n        id: route.id,\n        path: route.path,\n        params: mergeParams(route.params, allparams[i])\n      };\n    });\n  }\n\n  return chain;\n};\n\nvar mergeParams = function mergeParams(a, b) {\n  if (!a && b) {\n    return b;\n  } else if (a && !b) {\n    return a;\n  } else if (a && b) {\n    return Object.assign(Object.assign({}, a), b);\n  }\n\n  return undefined;\n};\n\nvar routerIDsToChain = function routerIDsToChain(ids, chains) {\n  var match = null;\n  var maxMatches = 0;\n  var plainIDs = ids.map(function (i) {\n    return i.id;\n  });\n\n  for (var _i = 0, chains_1 = chains; _i < chains_1.length; _i++) {\n    var chain = chains_1[_i];\n    var score = matchesIDs(plainIDs, chain);\n\n    if (score > maxMatches) {\n      match = chain;\n      maxMatches = score;\n    }\n  }\n\n  if (match) {\n    return match.map(function (route, i) {\n      return {\n        id: route.id,\n        path: route.path,\n        params: mergeParams(route.params, ids[i] && ids[i].params)\n      };\n    });\n  }\n\n  return null;\n};\n\nvar routerPathToChain = function routerPathToChain(path, chains) {\n  var match = null;\n  var matches = 0;\n\n  for (var _i = 0, chains_2 = chains; _i < chains_2.length; _i++) {\n    var chain = chains_2[_i];\n    var matchedChain = matchesPath(path, chain);\n\n    if (matchedChain !== null) {\n      var score = computePriority(matchedChain);\n\n      if (score > matches) {\n        matches = score;\n        match = matchedChain;\n      }\n    }\n  }\n\n  return match;\n};\n\nvar computePriority = function computePriority(chain) {\n  var score = 1;\n  var level = 1;\n\n  for (var _i = 0, chain_2 = chain; _i < chain_2.length; _i++) {\n    var route = chain_2[_i];\n\n    for (var _a = 0, _b = route.path; _a < _b.length; _a++) {\n      var path = _b[_a];\n\n      if (path[0] === ':') {\n        score += Math.pow(1, level);\n      } else if (path !== '') {\n        score += Math.pow(2, level);\n      }\n\n      level++;\n    }\n  }\n\n  return score;\n};\n\nvar RouterSegments =\n/** @class */\nfunction () {\n  function RouterSegments(path) {\n    this.path = path.slice();\n  }\n\n  RouterSegments.prototype.next = function () {\n    if (this.path.length > 0) {\n      return this.path.shift();\n    }\n\n    return '';\n  };\n\n  return RouterSegments;\n}();\n\nvar readRedirects = function readRedirects(root) {\n  return Array.from(root.children).filter(function (el) {\n    return el.tagName === 'ION-ROUTE-REDIRECT';\n  }).map(function (el) {\n    var to = readProp(el, 'to');\n    return {\n      from: parsePath(readProp(el, 'from')),\n      to: to == null ? undefined : parsePath(to)\n    };\n  });\n};\n\nvar readRoutes = function readRoutes(root) {\n  return flattenRouterTree(readRouteNodes(root));\n};\n\nvar readRouteNodes = function readRouteNodes(root, node) {\n  if (node === void 0) {\n    node = root;\n  }\n\n  return Array.from(node.children).filter(function (el) {\n    return el.tagName === 'ION-ROUTE' && el.component;\n  }).map(function (el) {\n    var component = readProp(el, 'component');\n\n    if (component == null) {\n      throw new Error('component missing in ion-route');\n    }\n\n    return {\n      path: parsePath(readProp(el, 'url')),\n      id: component.toLowerCase(),\n      params: el.componentProps,\n      beforeLeave: el.beforeLeave,\n      beforeEnter: el.beforeEnter,\n      children: readRouteNodes(root, el)\n    };\n  });\n};\n\nvar readProp = function readProp(el, prop) {\n  if (prop in el) {\n    return el[prop];\n  }\n\n  if (el.hasAttribute(prop)) {\n    return el.getAttribute(prop);\n  }\n\n  return null;\n};\n\nvar flattenRouterTree = function flattenRouterTree(nodes) {\n  var routes = [];\n\n  for (var _i = 0, nodes_1 = nodes; _i < nodes_1.length; _i++) {\n    var node = nodes_1[_i];\n    flattenNode([], routes, node);\n  }\n\n  return routes;\n};\n\nvar flattenNode = function flattenNode(chain, routes, node) {\n  var s = chain.slice();\n  s.push({\n    id: node.id,\n    path: node.path,\n    params: node.params,\n    beforeLeave: node.beforeLeave,\n    beforeEnter: node.beforeEnter\n  });\n\n  if (node.children.length === 0) {\n    routes.push(s);\n    return;\n  }\n\n  for (var _i = 0, _a = node.children; _i < _a.length; _i++) {\n    var sub = _a[_i];\n    flattenNode(s, routes, sub);\n  }\n};\n\nvar Router =\n/** @class */\nfunction () {\n  function class_1(hostRef) {\n    registerInstance(this, hostRef);\n    this.ionRouteWillChange = createEvent(this, \"ionRouteWillChange\", 7);\n    this.ionRouteDidChange = createEvent(this, \"ionRouteDidChange\", 7);\n    this.previousPath = null;\n    this.busy = false;\n    this.state = 0;\n    this.lastState = 0;\n    /**\n     * By default `ion-router` will match the routes at the root path (\"/\").\n     * That can be changed when\n     *\n     */\n\n    this.root = '/';\n    /**\n     * The router can work in two \"modes\":\n     * - With hash: `/index.html#/path/to/page`\n     * - Without hash: `/path/to/page`\n     *\n     * Using one or another might depend in the requirements of your app and/or where it's deployed.\n     *\n     * Usually \"hash-less\" navigation works better for SEO and it's more user friendly too, but it might\n     * requires additional server-side configuration in order to properly work.\n     *\n     * On the otherside hash-navigation is much easier to deploy, it even works over the file protocol.\n     *\n     * By default, this property is `true`, change to `false` to allow hash-less URLs.\n     */\n\n    this.useHash = true;\n  }\n\n  class_1.prototype.componentWillLoad = function () {\n    return __awaiter(this, void 0, void 0, function () {\n      return __generator(this, function (_a) {\n        switch (_a.label) {\n          case 0:\n            console.debug('[ion-router] router will load');\n            return [4\n            /*yield*/\n            , waitUntilNavNode()];\n\n          case 1:\n            _a.sent();\n\n            console.debug('[ion-router] found nav');\n            return [4\n            /*yield*/\n            , this.onRoutesChanged()];\n\n          case 2:\n            _a.sent();\n\n            return [2\n            /*return*/\n            ];\n        }\n      });\n    });\n  };\n\n  class_1.prototype.componentDidLoad = function () {\n    window.addEventListener('ionRouteRedirectChanged', debounce(this.onRedirectChanged.bind(this), 10));\n    window.addEventListener('ionRouteDataChanged', debounce(this.onRoutesChanged.bind(this), 100));\n  };\n\n  class_1.prototype.onPopState = function () {\n    return __awaiter(this, void 0, void 0, function () {\n      var direction, path, canProceed;\n      return __generator(this, function (_a) {\n        switch (_a.label) {\n          case 0:\n            direction = this.historyDirection();\n            path = this.getPath();\n            return [4\n            /*yield*/\n            , this.runGuards(path)];\n\n          case 1:\n            canProceed = _a.sent();\n\n            if (canProceed !== true) {\n              if (typeof canProceed === 'object') {\n                path = parsePath(canProceed.redirect);\n              }\n\n              return [2\n              /*return*/\n              , false];\n            }\n\n            console.debug('[ion-router] URL changed -> update nav', path, direction);\n            return [2\n            /*return*/\n            , this.writeNavStateRoot(path, direction)];\n        }\n      });\n    });\n  };\n\n  class_1.prototype.onBackButton = function (ev) {\n    var _this = this;\n\n    ev.detail.register(0, function (processNextHandler) {\n      _this.back();\n\n      processNextHandler();\n    });\n  };\n  /** @internal */\n\n\n  class_1.prototype.canTransition = function () {\n    return __awaiter(this, void 0, void 0, function () {\n      var canProceed;\n      return __generator(this, function (_a) {\n        switch (_a.label) {\n          case 0:\n            return [4\n            /*yield*/\n            , this.runGuards()];\n\n          case 1:\n            canProceed = _a.sent();\n\n            if (canProceed !== true) {\n              if (typeof canProceed === 'object') {\n                return [2\n                /*return*/\n                , canProceed.redirect];\n              } else {\n                return [2\n                /*return*/\n                , false];\n              }\n            }\n\n            return [2\n            /*return*/\n            , true];\n        }\n      });\n    });\n  };\n  /**\n   * Navigate to the specified URL.\n   *\n   * @param url The url to navigate to.\n   * @param direction The direction of the animation. Defaults to `\"forward\"`.\n   */\n\n\n  class_1.prototype.push = function (url, direction, animation) {\n    if (direction === void 0) {\n      direction = 'forward';\n    }\n\n    return __awaiter(this, void 0, void 0, function () {\n      var path, queryString, canProceed;\n      return __generator(this, function (_a) {\n        switch (_a.label) {\n          case 0:\n            if (url.startsWith('.')) {\n              url = new URL(url, window.location.href).pathname;\n            }\n\n            console.debug('[ion-router] URL pushed -> updating nav', url, direction);\n            path = parsePath(url);\n            queryString = url.split('?')[1];\n            return [4\n            /*yield*/\n            , this.runGuards(path)];\n\n          case 1:\n            canProceed = _a.sent();\n\n            if (canProceed !== true) {\n              if (typeof canProceed === 'object') {\n                path = parsePath(canProceed.redirect);\n                queryString = canProceed.redirect.split('?')[1];\n              } else {\n                return [2\n                /*return*/\n                , false];\n              }\n            }\n\n            this.setPath(path, direction, queryString);\n            return [2\n            /*return*/\n            , this.writeNavStateRoot(path, direction, animation)];\n        }\n      });\n    });\n  };\n  /**\n   * Go back to previous page in the window.history.\n   */\n\n\n  class_1.prototype.back = function () {\n    window.history.back();\n    return Promise.resolve(this.waitPromise);\n  };\n  /** @internal */\n\n\n  class_1.prototype.printDebug = function () {\n    return __awaiter(this, void 0, void 0, function () {\n      return __generator(this, function (_a) {\n        console.debug('CURRENT PATH', this.getPath());\n        console.debug('PREVIOUS PATH', this.previousPath);\n        printRoutes(readRoutes(this.el));\n        printRedirects(readRedirects(this.el));\n        return [2\n        /*return*/\n        ];\n      });\n    });\n  };\n  /** @internal */\n\n\n  class_1.prototype.navChanged = function (direction) {\n    return __awaiter(this, void 0, void 0, function () {\n      var _a, ids, outlet, routes, chain, path;\n\n      return __generator(this, function (_b) {\n        switch (_b.label) {\n          case 0:\n            if (this.busy) {\n              console.warn('[ion-router] router is busy, navChanged was cancelled');\n              return [2\n              /*return*/\n              , false];\n            }\n\n            return [4\n            /*yield*/\n            , readNavState(window.document.body)];\n\n          case 1:\n            _a = _b.sent(), ids = _a.ids, outlet = _a.outlet;\n            routes = readRoutes(this.el);\n            chain = routerIDsToChain(ids, routes);\n\n            if (!chain) {\n              console.warn('[ion-router] no matching URL for ', ids.map(function (i) {\n                return i.id;\n              }));\n              return [2\n              /*return*/\n              , false];\n            }\n\n            path = chainToPath(chain);\n\n            if (!path) {\n              console.warn('[ion-router] router could not match path because some required param is missing');\n              return [2\n              /*return*/\n              , false];\n            }\n\n            console.debug('[ion-router] nav changed -> update URL', ids, path);\n            this.setPath(path, direction);\n            return [4\n            /*yield*/\n            , this.safeWriteNavState(outlet, chain, ROUTER_INTENT_NONE, path, null, ids.length)];\n\n          case 2:\n            _b.sent();\n\n            return [2\n            /*return*/\n            , true];\n        }\n      });\n    });\n  };\n\n  class_1.prototype.onRedirectChanged = function () {\n    var path = this.getPath();\n\n    if (path && routeRedirect(path, readRedirects(this.el))) {\n      this.writeNavStateRoot(path, ROUTER_INTENT_NONE);\n    }\n  };\n\n  class_1.prototype.onRoutesChanged = function () {\n    return this.writeNavStateRoot(this.getPath(), ROUTER_INTENT_NONE);\n  };\n\n  class_1.prototype.historyDirection = function () {\n    var win = window;\n\n    if (win.history.state === null) {\n      this.state++;\n      win.history.replaceState(this.state, win.document.title, win.document.location && win.document.location.href);\n    }\n\n    var state = win.history.state;\n    var lastState = this.lastState;\n    this.lastState = state;\n\n    if (state > lastState || state >= lastState && lastState > 0) {\n      return ROUTER_INTENT_FORWARD;\n    } else if (state < lastState) {\n      return ROUTER_INTENT_BACK;\n    } else {\n      return ROUTER_INTENT_NONE;\n    }\n  };\n\n  class_1.prototype.writeNavStateRoot = function (path, direction, animation) {\n    return __awaiter(this, void 0, void 0, function () {\n      var redirects, redirect, redirectFrom, routes, chain;\n      return __generator(this, function (_a) {\n        if (!path) {\n          console.error('[ion-router] URL is not part of the routing set');\n          return [2\n          /*return*/\n          , false];\n        }\n\n        redirects = readRedirects(this.el);\n        redirect = routeRedirect(path, redirects);\n        redirectFrom = null;\n\n        if (redirect) {\n          this.setPath(redirect.to, direction);\n          redirectFrom = redirect.from;\n          path = redirect.to;\n        }\n\n        routes = readRoutes(this.el);\n        chain = routerPathToChain(path, routes);\n\n        if (!chain) {\n          console.error('[ion-router] the path does not match any route');\n          return [2\n          /*return*/\n          , false];\n        } // write DOM give\n\n\n        return [2\n        /*return*/\n        , this.safeWriteNavState(document.body, chain, direction, path, redirectFrom, 0, animation)];\n      });\n    });\n  };\n\n  class_1.prototype.safeWriteNavState = function (node, chain, direction, path, redirectFrom, index, animation) {\n    if (index === void 0) {\n      index = 0;\n    }\n\n    return __awaiter(this, void 0, void 0, function () {\n      var unlock, changed, e_2;\n      return __generator(this, function (_a) {\n        switch (_a.label) {\n          case 0:\n            return [4\n            /*yield*/\n            , this.lock()];\n\n          case 1:\n            unlock = _a.sent();\n            changed = false;\n            _a.label = 2;\n\n          case 2:\n            _a.trys.push([2, 4,, 5]);\n\n            return [4\n            /*yield*/\n            , this.writeNavState(node, chain, direction, path, redirectFrom, index, animation)];\n\n          case 3:\n            changed = _a.sent();\n            return [3\n            /*break*/\n            , 5];\n\n          case 4:\n            e_2 = _a.sent();\n            console.error(e_2);\n            return [3\n            /*break*/\n            , 5];\n\n          case 5:\n            unlock();\n            return [2\n            /*return*/\n            , changed];\n        }\n      });\n    });\n  };\n\n  class_1.prototype.lock = function () {\n    return __awaiter(this, void 0, void 0, function () {\n      var p, resolve;\n      return __generator(this, function (_a) {\n        switch (_a.label) {\n          case 0:\n            p = this.waitPromise;\n            this.waitPromise = new Promise(function (r) {\n              return resolve = r;\n            });\n            if (!(p !== undefined)) return [3\n            /*break*/\n            , 2];\n            return [4\n            /*yield*/\n            , p];\n\n          case 1:\n            _a.sent();\n\n            _a.label = 2;\n\n          case 2:\n            return [2\n            /*return*/\n            , resolve];\n        }\n      });\n    });\n  };\n\n  class_1.prototype.runGuards = function (to, from) {\n    if (to === void 0) {\n      to = this.getPath();\n    }\n\n    if (from === void 0) {\n      from = parsePath(this.previousPath);\n    }\n\n    return __awaiter(this, void 0, void 0, function () {\n      var routes, toChain, fromChain, beforeEnterHook, beforeLeaveHook, canLeave, _a, canEnter, _b;\n\n      return __generator(this, function (_c) {\n        switch (_c.label) {\n          case 0:\n            if (!to || !from) {\n              return [2\n              /*return*/\n              , true];\n            }\n\n            routes = readRoutes(this.el);\n            toChain = routerPathToChain(to, routes);\n            fromChain = routerPathToChain(from, routes);\n            beforeEnterHook = toChain && toChain[toChain.length - 1].beforeEnter;\n            beforeLeaveHook = fromChain && fromChain[fromChain.length - 1].beforeLeave;\n            if (!beforeLeaveHook) return [3\n            /*break*/\n            , 2];\n            return [4\n            /*yield*/\n            , beforeLeaveHook()];\n\n          case 1:\n            _a = _c.sent();\n            return [3\n            /*break*/\n            , 3];\n\n          case 2:\n            _a = true;\n            _c.label = 3;\n\n          case 3:\n            canLeave = _a;\n\n            if (canLeave === false || typeof canLeave === 'object') {\n              return [2\n              /*return*/\n              , canLeave];\n            }\n\n            if (!beforeEnterHook) return [3\n            /*break*/\n            , 5];\n            return [4\n            /*yield*/\n            , beforeEnterHook()];\n\n          case 4:\n            _b = _c.sent();\n            return [3\n            /*break*/\n            , 6];\n\n          case 5:\n            _b = true;\n            _c.label = 6;\n\n          case 6:\n            canEnter = _b;\n\n            if (canEnter === false || typeof canEnter === 'object') {\n              return [2\n              /*return*/\n              , canEnter];\n            }\n\n            return [2\n            /*return*/\n            , true];\n        }\n      });\n    });\n  };\n\n  class_1.prototype.writeNavState = function (node, chain, direction, path, redirectFrom, index, animation) {\n    if (index === void 0) {\n      index = 0;\n    }\n\n    return __awaiter(this, void 0, void 0, function () {\n      var routeEvent, changed;\n      return __generator(this, function (_a) {\n        switch (_a.label) {\n          case 0:\n            if (this.busy) {\n              console.warn('[ion-router] router is busy, transition was cancelled');\n              return [2\n              /*return*/\n              , false];\n            }\n\n            this.busy = true;\n            routeEvent = this.routeChangeEvent(path, redirectFrom);\n\n            if (routeEvent) {\n              this.ionRouteWillChange.emit(routeEvent);\n            }\n\n            return [4\n            /*yield*/\n            , writeNavState(node, chain, direction, index, false, animation)];\n\n          case 1:\n            changed = _a.sent();\n            this.busy = false;\n\n            if (changed) {\n              console.debug('[ion-router] route changed', path);\n            } // emit did change\n\n\n            if (routeEvent) {\n              this.ionRouteDidChange.emit(routeEvent);\n            }\n\n            return [2\n            /*return*/\n            , changed];\n        }\n      });\n    });\n  };\n\n  class_1.prototype.setPath = function (path, direction, queryString) {\n    this.state++;\n    writePath(window.history, this.root, this.useHash, path, direction, this.state, queryString);\n  };\n\n  class_1.prototype.getPath = function () {\n    return readPath(window.location, this.root, this.useHash);\n  };\n\n  class_1.prototype.routeChangeEvent = function (path, redirectFromPath) {\n    var from = this.previousPath;\n    var to = generatePath(path);\n    this.previousPath = to;\n\n    if (to === from) {\n      return null;\n    }\n\n    var redirectedFrom = redirectFromPath ? generatePath(redirectFromPath) : null;\n    return {\n      from: from,\n      redirectedFrom: redirectedFrom,\n      to: to\n    };\n  };\n\n  Object.defineProperty(class_1.prototype, \"el\", {\n    get: function get() {\n      return getElement(this);\n    },\n    enumerable: false,\n    configurable: true\n  });\n  return class_1;\n}();\n\nvar routerLinkCss = \":host{--background:transparent;--color:var(--ion-color-primary, #3880ff);background:var(--background);color:var(--color)}:host(.ion-color){color:var(--ion-color-base)}a{font-family:inherit;font-size:inherit;font-style:inherit;font-weight:inherit;letter-spacing:inherit;text-decoration:inherit;text-indent:inherit;text-overflow:inherit;text-transform:inherit;text-align:inherit;white-space:inherit;color:inherit}\";\n\nvar RouterLink =\n/** @class */\nfunction () {\n  function RouterLink(hostRef) {\n    var _this = this;\n\n    registerInstance(this, hostRef);\n    /**\n     * When using a router, it specifies the transition direction when navigating to\n     * another page using `href`.\n     */\n\n    this.routerDirection = 'forward';\n\n    this.onClick = function (ev) {\n      openURL(_this.href, ev, _this.routerDirection, _this.routerAnimation);\n    };\n  }\n\n  RouterLink.prototype.render = function () {\n    var _a;\n\n    var mode = getIonMode(this);\n    var attrs = {\n      href: this.href,\n      rel: this.rel,\n      target: this.target\n    };\n    return h(Host, {\n      onClick: this.onClick,\n      class: Object.assign(Object.assign({}, createColorClasses(this.color)), (_a = {}, _a[mode] = true, _a['ion-activatable'] = true, _a))\n    }, h(\"a\", Object.assign({}, attrs), h(\"slot\", null)));\n  };\n\n  return RouterLink;\n}();\n\nRouterLink.style = routerLinkCss;\nexport { Route as ion_route, RouteRedirect as ion_route_redirect, Router as ion_router, RouterLink as ion_router_link };","map":{"version":3,"sources":["/Users/priyatalreja/Desktop/spectra-hacks/friendmatch/node_modules/@ionic/core/dist/esm-es5/ion-route_4.entry.js"],"names":["__awaiter","__generator","__spreadArrays","r","registerInstance","e","createEvent","i","getElement","h","H","Host","b","getIonMode","debounce","o","openURL","c","createColorClasses","Route","hostRef","ionRouteDataChanged","url","prototype","onUpdate","newValue","emit","onComponentProps","oldValue","keys1","Object","keys","keys2","length","_i","keys1_1","key","connectedCallback","defineProperty","get","enumerable","configurable","RouteRedirect","ionRouteRedirectChanged","propDidChange","ROUTER_INTENT_NONE","ROUTER_INTENT_FORWARD","ROUTER_INTENT_BACK","generatePath","segments","path","filter","s","join","chainToPath","chain","chain_1","route","_a","_b","segment","param","params","slice","push","writePath","history","root","useHash","direction","state","queryString","parsePath","undefined","pushState","replaceState","removePrefix","prefix","readPath","loc","pathname","hash","removeQueryString","split","map","trim","printRoutes","routes","console","group","_loop_1","forEach","apply","ids","id","debug","routes_1","groupEnd","printRedirects","redirects","redirects_1","redirect","to","from","writeNavState","index","changed","animation","outlet","result","e_1","label","trys","searchNavNode","componentOnReady","sent","setRouteId","element","markVisible","error","readNavState","node","getRouteId","waitUntilNavNode","document","body","Promise","resolve","window","addEventListener","once","QUERY","matches","querySelector","matchesRedirect","input","expected","routeRedirect","find","matchesIDs","len","Math","min","toLowerCase","matchesPath","inputPath","RouterSegments","matchesDefault","allparams","path_1","data","next","mergeParams","a","assign","routerIDsToChain","chains","match","maxMatches","plainIDs","chains_1","score","routerPathToChain","chains_2","matchedChain","computePriority","level","chain_2","pow","shift","readRedirects","Array","children","el","tagName","readProp","readRoutes","flattenRouterTree","readRouteNodes","component","Error","componentProps","beforeLeave","beforeEnter","prop","hasAttribute","getAttribute","nodes","nodes_1","flattenNode","sub","Router","class_1","ionRouteWillChange","ionRouteDidChange","previousPath","busy","lastState","componentWillLoad","onRoutesChanged","componentDidLoad","onRedirectChanged","bind","onPopState","canProceed","historyDirection","getPath","runGuards","writeNavStateRoot","onBackButton","ev","_this","detail","register","processNextHandler","back","canTransition","startsWith","URL","location","href","setPath","waitPromise","printDebug","navChanged","warn","safeWriteNavState","win","title","redirectFrom","unlock","e_2","lock","p","toChain","fromChain","beforeEnterHook","beforeLeaveHook","canLeave","canEnter","_c","routeEvent","routeChangeEvent","redirectFromPath","redirectedFrom","routerLinkCss","RouterLink","routerDirection","onClick","routerAnimation","render","mode","attrs","rel","target","class","color","style","ion_route","ion_route_redirect","ion_router","ion_router_link"],"mappings":"AAAA,SAASA,SAAT,EAAoBC,WAApB,EAAiCC,cAAjC,QAAuD,OAAvD;AACA,SAASC,CAAC,IAAIC,gBAAd,EAAgCC,CAAC,IAAIC,WAArC,EAAkDC,CAAC,IAAIC,UAAvD,EAAmEC,CAAnE,EAAsEC,CAAC,IAAIC,IAA3E,QAAuF,qBAAvF;AACA,SAASC,CAAC,IAAIC,UAAd,QAAgC,4BAAhC;AACA,SAASR,CAAC,IAAIS,QAAd,QAA8B,uBAA9B;AACA,SAASC,CAAC,IAAIC,OAAd,EAAuBC,CAAC,IAAIC,kBAA5B,QAAsD,qBAAtD;;AACA,IAAIC,KAAK;AAAG;AAAe,YAAY;AACnC,WAASA,KAAT,CAAeC,OAAf,EAAwB;AACpBhB,IAAAA,gBAAgB,CAAC,IAAD,EAAOgB,OAAP,CAAhB;AACA,SAAKC,mBAAL,GAA2Bf,WAAW,CAAC,IAAD,EAAO,qBAAP,EAA8B,CAA9B,CAAtC;AACA;;;;;;;AAMA,SAAKgB,GAAL,GAAW,EAAX;AACH;;AACDH,EAAAA,KAAK,CAACI,SAAN,CAAgBC,QAAhB,GAA2B,UAAUC,QAAV,EAAoB;AAC3C,SAAKJ,mBAAL,CAAyBK,IAAzB,CAA8BD,QAA9B;AACH,GAFD;;AAGAN,EAAAA,KAAK,CAACI,SAAN,CAAgBI,gBAAhB,GAAmC,UAAUF,QAAV,EAAoBG,QAApB,EAA8B;AAC7D,QAAIH,QAAQ,KAAKG,QAAjB,EAA2B;AACvB;AACH;;AACD,QAAIC,KAAK,GAAGJ,QAAQ,GAAGK,MAAM,CAACC,IAAP,CAAYN,QAAZ,CAAH,GAA2B,EAA/C;AACA,QAAIO,KAAK,GAAGJ,QAAQ,GAAGE,MAAM,CAACC,IAAP,CAAYH,QAAZ,CAAH,GAA2B,EAA/C;;AACA,QAAIC,KAAK,CAACI,MAAN,KAAiBD,KAAK,CAACC,MAA3B,EAAmC;AAC/B,WAAKT,QAAL,CAAcC,QAAd;AACA;AACH;;AACD,SAAK,IAAIS,EAAE,GAAG,CAAT,EAAYC,OAAO,GAAGN,KAA3B,EAAkCK,EAAE,GAAGC,OAAO,CAACF,MAA/C,EAAuDC,EAAE,EAAzD,EAA6D;AACzD,UAAIE,GAAG,GAAGD,OAAO,CAACD,EAAD,CAAjB;;AACA,UAAIT,QAAQ,CAACW,GAAD,CAAR,KAAkBR,QAAQ,CAACQ,GAAD,CAA9B,EAAqC;AACjC,aAAKZ,QAAL,CAAcC,QAAd;AACA;AACH;AACJ;AACJ,GAjBD;;AAkBAN,EAAAA,KAAK,CAACI,SAAN,CAAgBc,iBAAhB,GAAoC,YAAY;AAC5C,SAAKhB,mBAAL,CAAyBK,IAAzB;AACH,GAFD;;AAGAI,EAAAA,MAAM,CAACQ,cAAP,CAAsBnB,KAAtB,EAA6B,UAA7B,EAAyC;AACrCoB,IAAAA,GAAG,EAAE,eAAY;AACb,aAAO;AACH,eAAO,CAAC,UAAD,CADJ;AAEH,qBAAa,CAAC,UAAD,CAFV;AAGH,0BAAkB,CAAC,kBAAD;AAHf,OAAP;AAKH,KAPoC;AAQrCC,IAAAA,UAAU,EAAE,KARyB;AASrCC,IAAAA,YAAY,EAAE;AATuB,GAAzC;AAWA,SAAOtB,KAAP;AACH,CAhD0B,EAA3B;;AAiDA,IAAIuB,aAAa;AAAG;AAAe,YAAY;AAC3C,WAASA,aAAT,CAAuBtB,OAAvB,EAAgC;AAC5BhB,IAAAA,gBAAgB,CAAC,IAAD,EAAOgB,OAAP,CAAhB;AACA,SAAKuB,uBAAL,GAA+BrC,WAAW,CAAC,IAAD,EAAO,yBAAP,EAAkC,CAAlC,CAA1C;AACH;;AACDoC,EAAAA,aAAa,CAACnB,SAAd,CAAwBqB,aAAxB,GAAwC,YAAY;AAChD,SAAKD,uBAAL,CAA6BjB,IAA7B;AACH,GAFD;;AAGAgB,EAAAA,aAAa,CAACnB,SAAd,CAAwBc,iBAAxB,GAA4C,YAAY;AACpD,SAAKM,uBAAL,CAA6BjB,IAA7B;AACH,GAFD;;AAGAI,EAAAA,MAAM,CAACQ,cAAP,CAAsBI,aAAtB,EAAqC,UAArC,EAAiD;AAC7CH,IAAAA,GAAG,EAAE,eAAY;AACb,aAAO;AACH,gBAAQ,CAAC,eAAD,CADL;AAEH,cAAM,CAAC,eAAD;AAFH,OAAP;AAIH,KAN4C;AAO7CC,IAAAA,UAAU,EAAE,KAPiC;AAQ7CC,IAAAA,YAAY,EAAE;AAR+B,GAAjD;AAUA,SAAOC,aAAP;AACH,CAtBkC,EAAnC;;AAuBA,IAAIG,kBAAkB,GAAG,MAAzB;AACA,IAAIC,qBAAqB,GAAG,SAA5B;AACA,IAAIC,kBAAkB,GAAG,MAAzB;;AACA,IAAIC,YAAY,GAAG,SAAfA,YAAe,CAAUC,QAAV,EAAoB;AACnC,MAAIC,IAAI,GAAGD,QAAQ,CACdE,MADM,CACC,UAAUC,CAAV,EAAa;AAAE,WAAOA,CAAC,CAACnB,MAAF,GAAW,CAAlB;AAAsB,GADtC,EAENoB,IAFM,CAED,GAFC,CAAX;AAGA,SAAO,MAAMH,IAAb;AACH,CALD;;AAMA,IAAII,WAAW,GAAG,SAAdA,WAAc,CAAUC,KAAV,EAAiB;AAC/B,MAAIL,IAAI,GAAG,EAAX;;AACA,OAAK,IAAIhB,EAAE,GAAG,CAAT,EAAYsB,OAAO,GAAGD,KAA3B,EAAkCrB,EAAE,GAAGsB,OAAO,CAACvB,MAA/C,EAAuDC,EAAE,EAAzD,EAA6D;AACzD,QAAIuB,KAAK,GAAGD,OAAO,CAACtB,EAAD,CAAnB;;AACA,SAAK,IAAIwB,EAAE,GAAG,CAAT,EAAYC,EAAE,GAAGF,KAAK,CAACP,IAA5B,EAAkCQ,EAAE,GAAGC,EAAE,CAAC1B,MAA1C,EAAkDyB,EAAE,EAApD,EAAwD;AACpD,UAAIE,OAAO,GAAGD,EAAE,CAACD,EAAD,CAAhB;;AACA,UAAIE,OAAO,CAAC,CAAD,CAAP,KAAe,GAAnB,EAAwB;AACpB,YAAIC,KAAK,GAAGJ,KAAK,CAACK,MAAN,IAAgBL,KAAK,CAACK,MAAN,CAAaF,OAAO,CAACG,KAAR,CAAc,CAAd,CAAb,CAA5B;;AACA,YAAI,CAACF,KAAL,EAAY;AACR,iBAAO,IAAP;AACH;;AACDX,QAAAA,IAAI,CAACc,IAAL,CAAUH,KAAV;AACH,OAND,MAOK,IAAID,OAAO,KAAK,EAAhB,EAAoB;AACrBV,QAAAA,IAAI,CAACc,IAAL,CAAUJ,OAAV;AACH;AACJ;AACJ;;AACD,SAAOV,IAAP;AACH,CAnBD;;AAoBA,IAAIe,SAAS,GAAG,SAAZA,SAAY,CAAUC,OAAV,EAAmBC,IAAnB,EAAyBC,OAAzB,EAAkClB,IAAlC,EAAwCmB,SAAxC,EAAmDC,KAAnD,EAA0DC,WAA1D,EAAuE;AACnF,MAAIjD,GAAG,GAAG0B,YAAY,CAAC9C,cAAc,CAACsE,SAAS,CAACL,IAAD,CAAV,EAAkBjB,IAAlB,CAAf,CAAtB;;AACA,MAAIkB,OAAJ,EAAa;AACT9C,IAAAA,GAAG,GAAG,MAAMA,GAAZ;AACH;;AACD,MAAIiD,WAAW,KAAKE,SAApB,EAA+B;AAC3BnD,IAAAA,GAAG,GAAGA,GAAG,GAAG,GAAN,GAAYiD,WAAlB;AACH;;AACD,MAAIF,SAAS,KAAKvB,qBAAlB,EAAyC;AACrCoB,IAAAA,OAAO,CAACQ,SAAR,CAAkBJ,KAAlB,EAAyB,EAAzB,EAA6BhD,GAA7B;AACH,GAFD,MAGK;AACD4C,IAAAA,OAAO,CAACS,YAAR,CAAqBL,KAArB,EAA4B,EAA5B,EAAgChD,GAAhC;AACH;AACJ,CAdD;;AAeA,IAAIsD,YAAY,GAAG,SAAfA,YAAe,CAAUC,MAAV,EAAkB3B,IAAlB,EAAwB;AACvC,MAAI2B,MAAM,CAAC5C,MAAP,GAAgBiB,IAAI,CAACjB,MAAzB,EAAiC;AAC7B,WAAO,IAAP;AACH;;AACD,MAAI4C,MAAM,CAAC5C,MAAP,IAAiB,CAAjB,IAAsB4C,MAAM,CAAC,CAAD,CAAN,KAAc,EAAxC,EAA4C;AACxC,WAAO3B,IAAP;AACH;;AACD,OAAK,IAAI3C,CAAC,GAAG,CAAb,EAAgBA,CAAC,GAAGsE,MAAM,CAAC5C,MAA3B,EAAmC1B,CAAC,EAApC,EAAwC;AACpC,QAAIsE,MAAM,CAACtE,CAAD,CAAN,CAAU0B,MAAV,GAAmB,CAAnB,IAAwB4C,MAAM,CAACtE,CAAD,CAAN,KAAc2C,IAAI,CAAC3C,CAAD,CAA9C,EAAmD;AAC/C,aAAO,IAAP;AACH;AACJ;;AACD,MAAI2C,IAAI,CAACjB,MAAL,KAAgB4C,MAAM,CAAC5C,MAA3B,EAAmC;AAC/B,WAAO,CAAC,EAAD,CAAP;AACH;;AACD,SAAOiB,IAAI,CAACa,KAAL,CAAWc,MAAM,CAAC5C,MAAlB,CAAP;AACH,CAhBD;;AAiBA,IAAI6C,QAAQ,GAAG,SAAXA,QAAW,CAAUC,GAAV,EAAeZ,IAAf,EAAqBC,OAArB,EAA8B;AACzC,MAAIY,QAAQ,GAAGD,GAAG,CAACC,QAAnB;;AACA,MAAIZ,OAAJ,EAAa;AACT,QAAIa,IAAI,GAAGF,GAAG,CAACE,IAAf;AACAD,IAAAA,QAAQ,GAAIC,IAAI,CAAC,CAAD,CAAJ,KAAY,GAAb,GACLA,IAAI,CAAClB,KAAL,CAAW,CAAX,CADK,GAEL,EAFN;AAGH;;AACD,MAAIc,MAAM,GAAGL,SAAS,CAACL,IAAD,CAAtB;AACA,MAAIjB,IAAI,GAAGsB,SAAS,CAACQ,QAAD,CAApB;AACA,SAAOJ,YAAY,CAACC,MAAD,EAAS3B,IAAT,CAAnB;AACH,CAXD;;AAYA,IAAIsB,SAAS,GAAG,SAAZA,SAAY,CAAUtB,IAAV,EAAgB;AAC5B,MAAIA,IAAI,IAAI,IAAZ,EAAkB;AACd,WAAO,CAAC,EAAD,CAAP;AACH;;AACD,MAAIgC,iBAAiB,GAAGhC,IAAI,CAACiC,KAAL,CAAW,GAAX,EAAgB,CAAhB,CAAxB;AACA,MAAIlC,QAAQ,GAAGiC,iBAAiB,CAACC,KAAlB,CAAwB,GAAxB,EACVC,GADU,CACN,UAAUhC,CAAV,EAAa;AAAE,WAAOA,CAAC,CAACiC,IAAF,EAAP;AAAkB,GAD3B,EAEVlC,MAFU,CAEH,UAAUC,CAAV,EAAa;AAAE,WAAOA,CAAC,CAACnB,MAAF,GAAW,CAAlB;AAAsB,GAFlC,CAAf;;AAGA,MAAIgB,QAAQ,CAAChB,MAAT,KAAoB,CAAxB,EAA2B;AACvB,WAAO,CAAC,EAAD,CAAP;AACH,GAFD,MAGK;AACD,WAAOgB,QAAP;AACH;AACJ,CAdD;;AAeA,IAAIqC,WAAW,GAAG,SAAdA,WAAc,CAAUC,MAAV,EAAkB;AAChCC,EAAAA,OAAO,CAACC,KAAR,CAAc,uBAAuBF,MAAM,CAACtD,MAA9B,GAAuC,GAArD;;AACA,MAAIyD,OAAO,GAAG,SAAVA,OAAU,CAAUnC,KAAV,EAAiB;AAC3B,QAAIL,IAAI,GAAG,EAAX;AACAK,IAAAA,KAAK,CAACoC,OAAN,CAAc,UAAUxF,CAAV,EAAa;AAAE,aAAO+C,IAAI,CAACc,IAAL,CAAU4B,KAAV,CAAgB1C,IAAhB,EAAsB/C,CAAC,CAAC+C,IAAxB,CAAP;AAAuC,KAApE;AACA,QAAI2C,GAAG,GAAGtC,KAAK,CAAC6B,GAAN,CAAU,UAAUjF,CAAV,EAAa;AAAE,aAAOA,CAAC,CAAC2F,EAAT;AAAc,KAAvC,CAAV;AACAN,IAAAA,OAAO,CAACO,KAAR,CAAc,QAAQ/C,YAAY,CAACE,IAAD,CAAlC,EAA0C,uCAA1C,EAAmF,MAAnF,EAA2F,MAAM2C,GAAG,CAACxC,IAAJ,CAAS,IAAT,CAAN,GAAuB,GAAlH;AACH,GALD;;AAMA,OAAK,IAAInB,EAAE,GAAG,CAAT,EAAY8D,QAAQ,GAAGT,MAA5B,EAAoCrD,EAAE,GAAG8D,QAAQ,CAAC/D,MAAlD,EAA0DC,EAAE,EAA5D,EAAgE;AAC5D,QAAIqB,KAAK,GAAGyC,QAAQ,CAAC9D,EAAD,CAApB;;AACAwD,IAAAA,OAAO,CAACnC,KAAD,CAAP;AACH;;AACDiC,EAAAA,OAAO,CAACS,QAAR;AACH,CAbD;;AAcA,IAAIC,cAAc,GAAG,SAAjBA,cAAiB,CAAUC,SAAV,EAAqB;AACtCX,EAAAA,OAAO,CAACC,KAAR,CAAc,0BAA0BU,SAAS,CAAClE,MAApC,GAA6C,GAA3D;;AACA,OAAK,IAAIC,EAAE,GAAG,CAAT,EAAYkE,WAAW,GAAGD,SAA/B,EAA0CjE,EAAE,GAAGkE,WAAW,CAACnE,MAA3D,EAAmEC,EAAE,EAArE,EAAyE;AACrE,QAAImE,QAAQ,GAAGD,WAAW,CAAClE,EAAD,CAA1B;;AACA,QAAImE,QAAQ,CAACC,EAAb,EAAiB;AACbd,MAAAA,OAAO,CAACO,KAAR,CAAc,QAAd,EAAwB,QAAQ/C,YAAY,CAACqD,QAAQ,CAACE,IAAV,CAA5C,EAA6D,mBAA7D,EAAkF,OAAlF,EAA2F,QAAQvD,YAAY,CAACqD,QAAQ,CAACC,EAAV,CAA/G,EAA8H,mBAA9H;AACH;AACJ;;AACDd,EAAAA,OAAO,CAACS,QAAR;AACH,CATD;;AAUA,IAAIO,aAAa,GAAG,SAAhBA,aAAgB,CAAUrC,IAAV,EAAgBZ,KAAhB,EAAuBc,SAAvB,EAAkCoC,KAAlC,EAAyCC,OAAzC,EAAkDC,SAAlD,EAA6D;AAC7E,MAAID,OAAO,KAAK,KAAK,CAArB,EAAwB;AAAEA,IAAAA,OAAO,GAAG,KAAV;AAAkB;;AAC5C,SAAO1G,SAAS,CAAC,KAAK,CAAN,EAAS,KAAK,CAAd,EAAiB,KAAK,CAAtB,EAAyB,YAAY;AACjD,QAAI4G,MAAJ,EAAYnD,KAAZ,EAAmBoD,MAAnB,EAA2BC,GAA3B;AACA,WAAO7G,WAAW,CAAC,IAAD,EAAO,UAAUyD,EAAV,EAAc;AACnC,cAAQA,EAAE,CAACqD,KAAX;AACI,aAAK,CAAL;AACIrD,UAAAA,EAAE,CAACsD,IAAH,CAAQhD,IAAR,CAAa,CAAC,CAAD,EAAI,CAAJ,GAAS,CAAT,CAAb;;AACA4C,UAAAA,MAAM,GAAGK,aAAa,CAAC9C,IAAD,CAAtB,CAFJ,CAGI;;AACA,cAAIsC,KAAK,IAAIlD,KAAK,CAACtB,MAAf,IAAyB,CAAC2E,MAA9B,EAAsC;AAClC,mBAAO,CAAC;AAAE;AAAH,cAAeF,OAAf,CAAP;AACH;;AACD,iBAAO,CAAC;AAAE;AAAH,YAAcE,MAAM,CAACM,gBAAP,EAAd,CAAP;;AACJ,aAAK,CAAL;AACIxD,UAAAA,EAAE,CAACyD,IAAH;;AACA1D,UAAAA,KAAK,GAAGF,KAAK,CAACkD,KAAD,CAAb;AACA,iBAAO,CAAC;AAAE;AAAH,YAAcG,MAAM,CAACQ,UAAP,CAAkB3D,KAAK,CAACqC,EAAxB,EAA4BrC,KAAK,CAACK,MAAlC,EAA0CO,SAA1C,EAAqDsC,SAArD,CAAd,CAAP;;AACJ,aAAK,CAAL;AACIE,UAAAA,MAAM,GAAGnD,EAAE,CAACyD,IAAH,EAAT,CADJ,CAEI;AACA;;AACA,cAAIN,MAAM,CAACH,OAAX,EAAoB;AAChBrC,YAAAA,SAAS,GAAGxB,kBAAZ;AACA6D,YAAAA,OAAO,GAAG,IAAV;AACH;;AACD,iBAAO,CAAC;AAAE;AAAH,YAAcF,aAAa,CAACK,MAAM,CAACQ,OAAR,EAAiB9D,KAAjB,EAAwBc,SAAxB,EAAmCoC,KAAK,GAAG,CAA3C,EAA8CC,OAA9C,EAAuDC,SAAvD,CAA3B,CAAP;;AACJ,aAAK,CAAL;AACI;AACAD,UAAAA,OAAO,GAAGhD,EAAE,CAACyD,IAAH,EAAV;AACA,cAAI,CAACN,MAAM,CAACS,WAAZ,EAAyB,OAAO,CAAC;AAAE;AAAH,YAAc,CAAd,CAAP;AACzB,iBAAO,CAAC;AAAE;AAAH,YAAcT,MAAM,CAACS,WAAP,EAAd,CAAP;;AACJ,aAAK,CAAL;AACI5D,UAAAA,EAAE,CAACyD,IAAH;;AACAzD,UAAAA,EAAE,CAACqD,KAAH,GAAW,CAAX;;AACJ,aAAK,CAAL;AAAQ,iBAAO,CAAC;AAAE;AAAH,YAAeL,OAAf,CAAP;;AACR,aAAK,CAAL;AACII,UAAAA,GAAG,GAAGpD,EAAE,CAACyD,IAAH,EAAN;AACA3B,UAAAA,OAAO,CAAC+B,KAAR,CAAcT,GAAd;AACA,iBAAO,CAAC;AAAE;AAAH,YAAe,KAAf,CAAP;;AACJ,aAAK,CAAL;AAAQ,iBAAO,CAAC;AAAE;AAAH,WAAP;AAnCZ;AAqCH,KAtCiB,CAAlB;AAuCH,GAzCe,CAAhB;AA0CH,CA5CD;;AA6CA,IAAIU,YAAY,GAAG,SAAfA,YAAe,CAAUrD,IAAV,EAAgB;AAAE,SAAOnE,SAAS,CAAC,KAAK,CAAN,EAAS,KAAK,CAAd,EAAiB,KAAK,CAAtB,EAAyB,YAAY;AACtF,QAAI6F,GAAJ,EAASe,MAAT,EAAiBa,IAAjB,EAAuB3B,EAAvB;AACA,WAAO7F,WAAW,CAAC,IAAD,EAAO,UAAUyD,EAAV,EAAc;AACnC,cAAQA,EAAE,CAACqD,KAAX;AACI,aAAK,CAAL;AACIlB,UAAAA,GAAG,GAAG,EAAN;AACA4B,UAAAA,IAAI,GAAGtD,IAAP;AACAT,UAAAA,EAAE,CAACqD,KAAH,GAAW,CAAX;;AACJ,aAAK,CAAL;AACI,cAAI,CAAC,IAAL,EAAW,OAAO,CAAC;AAAE;AAAH,YAAc,CAAd,CAAP;AACXH,UAAAA,MAAM,GAAGK,aAAa,CAACQ,IAAD,CAAtB;AACA,cAAI,CAACb,MAAL,EAAa,OAAO,CAAC;AAAE;AAAH,YAAc,CAAd,CAAP;AACb,iBAAO,CAAC;AAAE;AAAH,YAAcA,MAAM,CAACc,UAAP,EAAd,CAAP;;AACJ,aAAK,CAAL;AACI5B,UAAAA,EAAE,GAAGpC,EAAE,CAACyD,IAAH,EAAL;;AACA,cAAIrB,EAAJ,EAAQ;AACJ2B,YAAAA,IAAI,GAAG3B,EAAE,CAACuB,OAAV;AACAvB,YAAAA,EAAE,CAACuB,OAAH,GAAa5C,SAAb;AACAoB,YAAAA,GAAG,CAAC7B,IAAJ,CAAS8B,EAAT;AACH,WAJD,MAKK;AACD,mBAAO,CAAC;AAAE;AAAH,cAAc,CAAd,CAAP;AACH;;AACD,iBAAO,CAAC;AAAE;AAAH,YAAc,CAAd,CAAP;;AACJ,aAAK,CAAL;AAAQ,iBAAO,CAAC;AAAE;AAAH,YAAc,CAAd,CAAP;;AACR,aAAK,CAAL;AAAQ,iBAAO,CAAC;AAAE;AAAH,YAAc,CAAd,CAAP;;AACR,aAAK,CAAL;AAAQ,iBAAO,CAAC;AAAE;AAAH,YAAe;AAAED,YAAAA,GAAG,EAAEA,GAAP;AAAYe,YAAAA,MAAM,EAAEA;AAApB,WAAf,CAAP;AAvBZ;AAyBH,KA1BiB,CAAlB;AA2BH,GA7BoD,CAAhB;AA6BhC,CA7BL;;AA8BA,IAAIe,gBAAgB,GAAG,SAAnBA,gBAAmB,GAAY;AAC/B,MAAIV,aAAa,CAACW,QAAQ,CAACC,IAAV,CAAjB,EAAkC;AAC9B,WAAOC,OAAO,CAACC,OAAR,EAAP;AACH;;AACD,SAAO,IAAID,OAAJ,CAAY,UAAUC,OAAV,EAAmB;AAClCC,IAAAA,MAAM,CAACC,gBAAP,CAAwB,gBAAxB,EAA0CF,OAA1C,EAAmD;AAAEG,MAAAA,IAAI,EAAE;AAAR,KAAnD;AACH,GAFM,CAAP;AAGH,CAPD;;AAQA,IAAIC,KAAK,GAAG,4FAAZ;;AACA,IAAIlB,aAAa,GAAG,SAAhBA,aAAgB,CAAU9C,IAAV,EAAgB;AAChC,MAAI,CAACA,IAAL,EAAW;AACP,WAAOM,SAAP;AACH;;AACD,MAAIN,IAAI,CAACiE,OAAL,CAAaD,KAAb,CAAJ,EAAyB;AACrB,WAAOhE,IAAP;AACH;;AACD,MAAIyC,MAAM,GAAGzC,IAAI,CAACkE,aAAL,CAAmBF,KAAnB,CAAb;AACA,SAAOvB,MAAM,GAAGA,MAAH,GAAYnC,SAAzB;AACH,CATD;;AAUA,IAAI6D,eAAe,GAAG,SAAlBA,eAAkB,CAAUC,KAAV,EAAiB9E,KAAjB,EAAwB;AAC1C,MAAI8C,IAAI,GAAG9C,KAAK,CAAC8C,IAAjB;AAAA,MAAuBD,EAAE,GAAG7C,KAAK,CAAC6C,EAAlC;;AACA,MAAIA,EAAE,KAAK7B,SAAX,EAAsB;AAClB,WAAO,KAAP;AACH;;AACD,MAAI8B,IAAI,CAACtE,MAAL,GAAcsG,KAAK,CAACtG,MAAxB,EAAgC;AAC5B,WAAO,KAAP;AACH;;AACD,OAAK,IAAI1B,CAAC,GAAG,CAAb,EAAgBA,CAAC,GAAGgG,IAAI,CAACtE,MAAzB,EAAiC1B,CAAC,EAAlC,EAAsC;AAClC,QAAIiI,QAAQ,GAAGjC,IAAI,CAAChG,CAAD,CAAnB;;AACA,QAAIiI,QAAQ,KAAK,GAAjB,EAAsB;AAClB,aAAO,IAAP;AACH;;AACD,QAAIA,QAAQ,KAAKD,KAAK,CAAChI,CAAD,CAAtB,EAA2B;AACvB,aAAO,KAAP;AACH;AACJ;;AACD,SAAOgG,IAAI,CAACtE,MAAL,KAAgBsG,KAAK,CAACtG,MAA7B;AACH,CAlBD;;AAmBA,IAAIwG,aAAa,GAAG,SAAhBA,aAAgB,CAAUvF,IAAV,EAAgBqC,MAAhB,EAAwB;AACxC,SAAOA,MAAM,CAACmD,IAAP,CAAY,UAAUjF,KAAV,EAAiB;AAAE,WAAO6E,eAAe,CAACpF,IAAD,EAAOO,KAAP,CAAtB;AAAsC,GAArE,CAAP;AACH,CAFD;;AAGA,IAAIkF,UAAU,GAAG,SAAbA,UAAa,CAAU9C,GAAV,EAAetC,KAAf,EAAsB;AACnC,MAAIqF,GAAG,GAAGC,IAAI,CAACC,GAAL,CAASjD,GAAG,CAAC5D,MAAb,EAAqBsB,KAAK,CAACtB,MAA3B,CAAV;AACA,MAAI1B,CAAC,GAAG,CAAR;;AACA,SAAOA,CAAC,GAAGqI,GAAX,EAAgBrI,CAAC,EAAjB,EAAqB;AACjB,QAAIsF,GAAG,CAACtF,CAAD,CAAH,CAAOwI,WAAP,OAAyBxF,KAAK,CAAChD,CAAD,CAAL,CAASuF,EAAtC,EAA0C;AACtC;AACH;AACJ;;AACD,SAAOvF,CAAP;AACH,CATD;;AAUA,IAAIyI,WAAW,GAAG,SAAdA,WAAc,CAAUC,SAAV,EAAqB1F,KAArB,EAA4B;AAC1C,MAAIN,QAAQ,GAAG,IAAIiG,cAAJ,CAAmBD,SAAnB,CAAf;AACA,MAAIE,cAAc,GAAG,KAArB;AACA,MAAIC,SAAJ;;AACA,OAAK,IAAI7I,CAAC,GAAG,CAAb,EAAgBA,CAAC,GAAGgD,KAAK,CAACtB,MAA1B,EAAkC1B,CAAC,EAAnC,EAAuC;AACnC,QAAI2C,IAAI,GAAGK,KAAK,CAAChD,CAAD,CAAL,CAAS2C,IAApB;;AACA,QAAIA,IAAI,CAAC,CAAD,CAAJ,KAAY,EAAhB,EAAoB;AAChBiG,MAAAA,cAAc,GAAG,IAAjB;AACH,KAFD,MAGK;AACD,WAAK,IAAIjH,EAAE,GAAG,CAAT,EAAYmH,MAAM,GAAGnG,IAA1B,EAAgChB,EAAE,GAAGmH,MAAM,CAACpH,MAA5C,EAAoDC,EAAE,EAAtD,EAA0D;AACtD,YAAI0B,OAAO,GAAGyF,MAAM,CAACnH,EAAD,CAApB;AACA,YAAIoH,IAAI,GAAGrG,QAAQ,CAACsG,IAAT,EAAX,CAFsD,CAGtD;;AACA,YAAI3F,OAAO,CAAC,CAAD,CAAP,KAAe,GAAnB,EAAwB;AACpB,cAAI0F,IAAI,KAAK,EAAb,EAAiB;AACb,mBAAO,IAAP;AACH;;AACDF,UAAAA,SAAS,GAAGA,SAAS,IAAI,EAAzB;AACA,cAAItF,MAAM,GAAGsF,SAAS,CAAC7I,CAAD,CAAT,KAAiB6I,SAAS,CAAC7I,CAAD,CAAT,GAAe,EAAhC,CAAb;AACAuD,UAAAA,MAAM,CAACF,OAAO,CAACG,KAAR,CAAc,CAAd,CAAD,CAAN,GAA2BuF,IAA3B;AACH,SAPD,MAQK,IAAIA,IAAI,KAAK1F,OAAb,EAAsB;AACvB,iBAAO,IAAP;AACH;AACJ;;AACDuF,MAAAA,cAAc,GAAG,KAAjB;AACH;AACJ;;AACD,MAAIf,OAAO,GAAIe,cAAD,GACRA,cAAc,MAAMlG,QAAQ,CAACsG,IAAT,OAAoB,EAA1B,CADN,GAER,IAFN;;AAGA,MAAI,CAACnB,OAAL,EAAc;AACV,WAAO,IAAP;AACH;;AACD,MAAIgB,SAAJ,EAAe;AACX,WAAO7F,KAAK,CAAC6B,GAAN,CAAU,UAAU3B,KAAV,EAAiBlD,CAAjB,EAAoB;AAAE,aAAQ;AAC3CuF,QAAAA,EAAE,EAAErC,KAAK,CAACqC,EADiC;AAE3C5C,QAAAA,IAAI,EAAEO,KAAK,CAACP,IAF+B;AAG3CY,QAAAA,MAAM,EAAE0F,WAAW,CAAC/F,KAAK,CAACK,MAAP,EAAesF,SAAS,CAAC7I,CAAD,CAAxB;AAHwB,OAAR;AAIlC,KAJE,CAAP;AAKH;;AACD,SAAOgD,KAAP;AACH,CA3CD;;AA4CA,IAAIiG,WAAW,GAAG,SAAdA,WAAc,CAAUC,CAAV,EAAa7I,CAAb,EAAgB;AAC9B,MAAI,CAAC6I,CAAD,IAAM7I,CAAV,EAAa;AACT,WAAOA,CAAP;AACH,GAFD,MAGK,IAAI6I,CAAC,IAAI,CAAC7I,CAAV,EAAa;AACd,WAAO6I,CAAP;AACH,GAFI,MAGA,IAAIA,CAAC,IAAI7I,CAAT,EAAY;AACb,WAAOkB,MAAM,CAAC4H,MAAP,CAAc5H,MAAM,CAAC4H,MAAP,CAAc,EAAd,EAAkBD,CAAlB,CAAd,EAAoC7I,CAApC,CAAP;AACH;;AACD,SAAO6D,SAAP;AACH,CAXD;;AAYA,IAAIkF,gBAAgB,GAAG,SAAnBA,gBAAmB,CAAU9D,GAAV,EAAe+D,MAAf,EAAuB;AAC1C,MAAIC,KAAK,GAAG,IAAZ;AACA,MAAIC,UAAU,GAAG,CAAjB;AACA,MAAIC,QAAQ,GAAGlE,GAAG,CAACT,GAAJ,CAAQ,UAAU7E,CAAV,EAAa;AAAE,WAAOA,CAAC,CAACuF,EAAT;AAAc,GAArC,CAAf;;AACA,OAAK,IAAI5D,EAAE,GAAG,CAAT,EAAY8H,QAAQ,GAAGJ,MAA5B,EAAoC1H,EAAE,GAAG8H,QAAQ,CAAC/H,MAAlD,EAA0DC,EAAE,EAA5D,EAAgE;AAC5D,QAAIqB,KAAK,GAAGyG,QAAQ,CAAC9H,EAAD,CAApB;AACA,QAAI+H,KAAK,GAAGtB,UAAU,CAACoB,QAAD,EAAWxG,KAAX,CAAtB;;AACA,QAAI0G,KAAK,GAAGH,UAAZ,EAAwB;AACpBD,MAAAA,KAAK,GAAGtG,KAAR;AACAuG,MAAAA,UAAU,GAAGG,KAAb;AACH;AACJ;;AACD,MAAIJ,KAAJ,EAAW;AACP,WAAOA,KAAK,CAACzE,GAAN,CAAU,UAAU3B,KAAV,EAAiBlD,CAAjB,EAAoB;AAAE,aAAQ;AAC3CuF,QAAAA,EAAE,EAAErC,KAAK,CAACqC,EADiC;AAE3C5C,QAAAA,IAAI,EAAEO,KAAK,CAACP,IAF+B;AAG3CY,QAAAA,MAAM,EAAE0F,WAAW,CAAC/F,KAAK,CAACK,MAAP,EAAe+B,GAAG,CAACtF,CAAD,CAAH,IAAUsF,GAAG,CAACtF,CAAD,CAAH,CAAOuD,MAAhC;AAHwB,OAAR;AAIlC,KAJE,CAAP;AAKH;;AACD,SAAO,IAAP;AACH,CApBD;;AAqBA,IAAIoG,iBAAiB,GAAG,SAApBA,iBAAoB,CAAUhH,IAAV,EAAgB0G,MAAhB,EAAwB;AAC5C,MAAIC,KAAK,GAAG,IAAZ;AACA,MAAIzB,OAAO,GAAG,CAAd;;AACA,OAAK,IAAIlG,EAAE,GAAG,CAAT,EAAYiI,QAAQ,GAAGP,MAA5B,EAAoC1H,EAAE,GAAGiI,QAAQ,CAAClI,MAAlD,EAA0DC,EAAE,EAA5D,EAAgE;AAC5D,QAAIqB,KAAK,GAAG4G,QAAQ,CAACjI,EAAD,CAApB;AACA,QAAIkI,YAAY,GAAGpB,WAAW,CAAC9F,IAAD,EAAOK,KAAP,CAA9B;;AACA,QAAI6G,YAAY,KAAK,IAArB,EAA2B;AACvB,UAAIH,KAAK,GAAGI,eAAe,CAACD,YAAD,CAA3B;;AACA,UAAIH,KAAK,GAAG7B,OAAZ,EAAqB;AACjBA,QAAAA,OAAO,GAAG6B,KAAV;AACAJ,QAAAA,KAAK,GAAGO,YAAR;AACH;AACJ;AACJ;;AACD,SAAOP,KAAP;AACH,CAfD;;AAgBA,IAAIQ,eAAe,GAAG,SAAlBA,eAAkB,CAAU9G,KAAV,EAAiB;AACnC,MAAI0G,KAAK,GAAG,CAAZ;AACA,MAAIK,KAAK,GAAG,CAAZ;;AACA,OAAK,IAAIpI,EAAE,GAAG,CAAT,EAAYqI,OAAO,GAAGhH,KAA3B,EAAkCrB,EAAE,GAAGqI,OAAO,CAACtI,MAA/C,EAAuDC,EAAE,EAAzD,EAA6D;AACzD,QAAIuB,KAAK,GAAG8G,OAAO,CAACrI,EAAD,CAAnB;;AACA,SAAK,IAAIwB,EAAE,GAAG,CAAT,EAAYC,EAAE,GAAGF,KAAK,CAACP,IAA5B,EAAkCQ,EAAE,GAAGC,EAAE,CAAC1B,MAA1C,EAAkDyB,EAAE,EAApD,EAAwD;AACpD,UAAIR,IAAI,GAAGS,EAAE,CAACD,EAAD,CAAb;;AACA,UAAIR,IAAI,CAAC,CAAD,CAAJ,KAAY,GAAhB,EAAqB;AACjB+G,QAAAA,KAAK,IAAIpB,IAAI,CAAC2B,GAAL,CAAS,CAAT,EAAYF,KAAZ,CAAT;AACH,OAFD,MAGK,IAAIpH,IAAI,KAAK,EAAb,EAAiB;AAClB+G,QAAAA,KAAK,IAAIpB,IAAI,CAAC2B,GAAL,CAAS,CAAT,EAAYF,KAAZ,CAAT;AACH;;AACDA,MAAAA,KAAK;AACR;AACJ;;AACD,SAAOL,KAAP;AACH,CAjBD;;AAkBA,IAAIf,cAAc;AAAG;AAAe,YAAY;AAC5C,WAASA,cAAT,CAAwBhG,IAAxB,EAA8B;AAC1B,SAAKA,IAAL,GAAYA,IAAI,CAACa,KAAL,EAAZ;AACH;;AACDmF,EAAAA,cAAc,CAAC3H,SAAf,CAAyBgI,IAAzB,GAAgC,YAAY;AACxC,QAAI,KAAKrG,IAAL,CAAUjB,MAAV,GAAmB,CAAvB,EAA0B;AACtB,aAAO,KAAKiB,IAAL,CAAUuH,KAAV,EAAP;AACH;;AACD,WAAO,EAAP;AACH,GALD;;AAMA,SAAOvB,cAAP;AACH,CAXmC,EAApC;;AAYA,IAAIwB,aAAa,GAAG,SAAhBA,aAAgB,CAAUvG,IAAV,EAAgB;AAChC,SAAOwG,KAAK,CAACpE,IAAN,CAAWpC,IAAI,CAACyG,QAAhB,EACFzH,MADE,CACK,UAAU0H,EAAV,EAAc;AAAE,WAAOA,EAAE,CAACC,OAAH,KAAe,oBAAtB;AAA6C,GADlE,EAEF1F,GAFE,CAEE,UAAUyF,EAAV,EAAc;AACnB,QAAIvE,EAAE,GAAGyE,QAAQ,CAACF,EAAD,EAAK,IAAL,CAAjB;AACA,WAAO;AACHtE,MAAAA,IAAI,EAAE/B,SAAS,CAACuG,QAAQ,CAACF,EAAD,EAAK,MAAL,CAAT,CADZ;AAEHvE,MAAAA,EAAE,EAAEA,EAAE,IAAI,IAAN,GAAa7B,SAAb,GAAyBD,SAAS,CAAC8B,EAAD;AAFnC,KAAP;AAIH,GARM,CAAP;AASH,CAVD;;AAWA,IAAI0E,UAAU,GAAG,SAAbA,UAAa,CAAU7G,IAAV,EAAgB;AAC7B,SAAO8G,iBAAiB,CAACC,cAAc,CAAC/G,IAAD,CAAf,CAAxB;AACH,CAFD;;AAGA,IAAI+G,cAAc,GAAG,SAAjBA,cAAiB,CAAU/G,IAAV,EAAgBsD,IAAhB,EAAsB;AACvC,MAAIA,IAAI,KAAK,KAAK,CAAlB,EAAqB;AAAEA,IAAAA,IAAI,GAAGtD,IAAP;AAAc;;AACrC,SAAOwG,KAAK,CAACpE,IAAN,CAAWkB,IAAI,CAACmD,QAAhB,EACFzH,MADE,CACK,UAAU0H,EAAV,EAAc;AAAE,WAAOA,EAAE,CAACC,OAAH,KAAe,WAAf,IAA8BD,EAAE,CAACM,SAAxC;AAAoD,GADzE,EAEF/F,GAFE,CAEE,UAAUyF,EAAV,EAAc;AACnB,QAAIM,SAAS,GAAGJ,QAAQ,CAACF,EAAD,EAAK,WAAL,CAAxB;;AACA,QAAIM,SAAS,IAAI,IAAjB,EAAuB;AACnB,YAAM,IAAIC,KAAJ,CAAU,gCAAV,CAAN;AACH;;AACD,WAAO;AACHlI,MAAAA,IAAI,EAAEsB,SAAS,CAACuG,QAAQ,CAACF,EAAD,EAAK,KAAL,CAAT,CADZ;AAEH/E,MAAAA,EAAE,EAAEqF,SAAS,CAACpC,WAAV,EAFD;AAGHjF,MAAAA,MAAM,EAAE+G,EAAE,CAACQ,cAHR;AAIHC,MAAAA,WAAW,EAAET,EAAE,CAACS,WAJb;AAKHC,MAAAA,WAAW,EAAEV,EAAE,CAACU,WALb;AAMHX,MAAAA,QAAQ,EAAEM,cAAc,CAAC/G,IAAD,EAAO0G,EAAP;AANrB,KAAP;AAQH,GAfM,CAAP;AAgBH,CAlBD;;AAmBA,IAAIE,QAAQ,GAAG,SAAXA,QAAW,CAAUF,EAAV,EAAcW,IAAd,EAAoB;AAC/B,MAAIA,IAAI,IAAIX,EAAZ,EAAgB;AACZ,WAAOA,EAAE,CAACW,IAAD,CAAT;AACH;;AACD,MAAIX,EAAE,CAACY,YAAH,CAAgBD,IAAhB,CAAJ,EAA2B;AACvB,WAAOX,EAAE,CAACa,YAAH,CAAgBF,IAAhB,CAAP;AACH;;AACD,SAAO,IAAP;AACH,CARD;;AASA,IAAIP,iBAAiB,GAAG,SAApBA,iBAAoB,CAAUU,KAAV,EAAiB;AACrC,MAAIpG,MAAM,GAAG,EAAb;;AACA,OAAK,IAAIrD,EAAE,GAAG,CAAT,EAAY0J,OAAO,GAAGD,KAA3B,EAAkCzJ,EAAE,GAAG0J,OAAO,CAAC3J,MAA/C,EAAuDC,EAAE,EAAzD,EAA6D;AACzD,QAAIuF,IAAI,GAAGmE,OAAO,CAAC1J,EAAD,CAAlB;AACA2J,IAAAA,WAAW,CAAC,EAAD,EAAKtG,MAAL,EAAakC,IAAb,CAAX;AACH;;AACD,SAAOlC,MAAP;AACH,CAPD;;AAQA,IAAIsG,WAAW,GAAG,SAAdA,WAAc,CAAUtI,KAAV,EAAiBgC,MAAjB,EAAyBkC,IAAzB,EAA+B;AAC7C,MAAIrE,CAAC,GAAGG,KAAK,CAACQ,KAAN,EAAR;AACAX,EAAAA,CAAC,CAACY,IAAF,CAAO;AACH8B,IAAAA,EAAE,EAAE2B,IAAI,CAAC3B,EADN;AAEH5C,IAAAA,IAAI,EAAEuE,IAAI,CAACvE,IAFR;AAGHY,IAAAA,MAAM,EAAE2D,IAAI,CAAC3D,MAHV;AAIHwH,IAAAA,WAAW,EAAE7D,IAAI,CAAC6D,WAJf;AAKHC,IAAAA,WAAW,EAAE9D,IAAI,CAAC8D;AALf,GAAP;;AAOA,MAAI9D,IAAI,CAACmD,QAAL,CAAc3I,MAAd,KAAyB,CAA7B,EAAgC;AAC5BsD,IAAAA,MAAM,CAACvB,IAAP,CAAYZ,CAAZ;AACA;AACH;;AACD,OAAK,IAAIlB,EAAE,GAAG,CAAT,EAAYwB,EAAE,GAAG+D,IAAI,CAACmD,QAA3B,EAAqC1I,EAAE,GAAGwB,EAAE,CAACzB,MAA7C,EAAqDC,EAAE,EAAvD,EAA2D;AACvD,QAAI4J,GAAG,GAAGpI,EAAE,CAACxB,EAAD,CAAZ;AACA2J,IAAAA,WAAW,CAACzI,CAAD,EAAImC,MAAJ,EAAYuG,GAAZ,CAAX;AACH;AACJ,CAjBD;;AAkBA,IAAIC,MAAM;AAAG;AAAe,YAAY;AACpC,WAASC,OAAT,CAAiB5K,OAAjB,EAA0B;AACtBhB,IAAAA,gBAAgB,CAAC,IAAD,EAAOgB,OAAP,CAAhB;AACA,SAAK6K,kBAAL,GAA0B3L,WAAW,CAAC,IAAD,EAAO,oBAAP,EAA6B,CAA7B,CAArC;AACA,SAAK4L,iBAAL,GAAyB5L,WAAW,CAAC,IAAD,EAAO,mBAAP,EAA4B,CAA5B,CAApC;AACA,SAAK6L,YAAL,GAAoB,IAApB;AACA,SAAKC,IAAL,GAAY,KAAZ;AACA,SAAK9H,KAAL,GAAa,CAAb;AACA,SAAK+H,SAAL,GAAiB,CAAjB;AACA;;;;;;AAKA,SAAKlI,IAAL,GAAY,GAAZ;AACA;;;;;;;;;;;;;;;AAcA,SAAKC,OAAL,GAAe,IAAf;AACH;;AACD4H,EAAAA,OAAO,CAACzK,SAAR,CAAkB+K,iBAAlB,GAAsC,YAAY;AAC9C,WAAOtM,SAAS,CAAC,IAAD,EAAO,KAAK,CAAZ,EAAe,KAAK,CAApB,EAAuB,YAAY;AAC/C,aAAOC,WAAW,CAAC,IAAD,EAAO,UAAUyD,EAAV,EAAc;AACnC,gBAAQA,EAAE,CAACqD,KAAX;AACI,eAAK,CAAL;AACIvB,YAAAA,OAAO,CAACO,KAAR,CAAc,+BAAd;AACA,mBAAO,CAAC;AAAE;AAAH,cAAc4B,gBAAgB,EAA9B,CAAP;;AACJ,eAAK,CAAL;AACIjE,YAAAA,EAAE,CAACyD,IAAH;;AACA3B,YAAAA,OAAO,CAACO,KAAR,CAAc,wBAAd;AACA,mBAAO,CAAC;AAAE;AAAH,cAAc,KAAKwG,eAAL,EAAd,CAAP;;AACJ,eAAK,CAAL;AACI7I,YAAAA,EAAE,CAACyD,IAAH;;AACA,mBAAO,CAAC;AAAE;AAAH,aAAP;AAVR;AAYH,OAbiB,CAAlB;AAcH,KAfe,CAAhB;AAgBH,GAjBD;;AAkBA6E,EAAAA,OAAO,CAACzK,SAAR,CAAkBiL,gBAAlB,GAAqC,YAAY;AAC7CxE,IAAAA,MAAM,CAACC,gBAAP,CAAwB,yBAAxB,EAAmDnH,QAAQ,CAAC,KAAK2L,iBAAL,CAAuBC,IAAvB,CAA4B,IAA5B,CAAD,EAAoC,EAApC,CAA3D;AACA1E,IAAAA,MAAM,CAACC,gBAAP,CAAwB,qBAAxB,EAA+CnH,QAAQ,CAAC,KAAKyL,eAAL,CAAqBG,IAArB,CAA0B,IAA1B,CAAD,EAAkC,GAAlC,CAAvD;AACH,GAHD;;AAIAV,EAAAA,OAAO,CAACzK,SAAR,CAAkBoL,UAAlB,GAA+B,YAAY;AACvC,WAAO3M,SAAS,CAAC,IAAD,EAAO,KAAK,CAAZ,EAAe,KAAK,CAApB,EAAuB,YAAY;AAC/C,UAAIqE,SAAJ,EAAenB,IAAf,EAAqB0J,UAArB;AACA,aAAO3M,WAAW,CAAC,IAAD,EAAO,UAAUyD,EAAV,EAAc;AACnC,gBAAQA,EAAE,CAACqD,KAAX;AACI,eAAK,CAAL;AACI1C,YAAAA,SAAS,GAAG,KAAKwI,gBAAL,EAAZ;AACA3J,YAAAA,IAAI,GAAG,KAAK4J,OAAL,EAAP;AACA,mBAAO,CAAC;AAAE;AAAH,cAAc,KAAKC,SAAL,CAAe7J,IAAf,CAAd,CAAP;;AACJ,eAAK,CAAL;AACI0J,YAAAA,UAAU,GAAGlJ,EAAE,CAACyD,IAAH,EAAb;;AACA,gBAAIyF,UAAU,KAAK,IAAnB,EAAyB;AACrB,kBAAI,OAAOA,UAAP,KAAsB,QAA1B,EAAoC;AAChC1J,gBAAAA,IAAI,GAAGsB,SAAS,CAACoI,UAAU,CAACvG,QAAZ,CAAhB;AACH;;AACD,qBAAO,CAAC;AAAE;AAAH,gBAAe,KAAf,CAAP;AACH;;AACDb,YAAAA,OAAO,CAACO,KAAR,CAAc,wCAAd,EAAwD7C,IAAxD,EAA8DmB,SAA9D;AACA,mBAAO,CAAC;AAAE;AAAH,cAAe,KAAK2I,iBAAL,CAAuB9J,IAAvB,EAA6BmB,SAA7B,CAAf,CAAP;AAdR;AAgBH,OAjBiB,CAAlB;AAkBH,KApBe,CAAhB;AAqBH,GAtBD;;AAuBA2H,EAAAA,OAAO,CAACzK,SAAR,CAAkB0L,YAAlB,GAAiC,UAAUC,EAAV,EAAc;AAC3C,QAAIC,KAAK,GAAG,IAAZ;;AACAD,IAAAA,EAAE,CAACE,MAAH,CAAUC,QAAV,CAAmB,CAAnB,EAAsB,UAAUC,kBAAV,EAA8B;AAChDH,MAAAA,KAAK,CAACI,IAAN;;AACAD,MAAAA,kBAAkB;AACrB,KAHD;AAIH,GAND;AAOA;;;AACAtB,EAAAA,OAAO,CAACzK,SAAR,CAAkBiM,aAAlB,GAAkC,YAAY;AAC1C,WAAOxN,SAAS,CAAC,IAAD,EAAO,KAAK,CAAZ,EAAe,KAAK,CAApB,EAAuB,YAAY;AAC/C,UAAI4M,UAAJ;AACA,aAAO3M,WAAW,CAAC,IAAD,EAAO,UAAUyD,EAAV,EAAc;AACnC,gBAAQA,EAAE,CAACqD,KAAX;AACI,eAAK,CAAL;AAAQ,mBAAO,CAAC;AAAE;AAAH,cAAc,KAAKgG,SAAL,EAAd,CAAP;;AACR,eAAK,CAAL;AACIH,YAAAA,UAAU,GAAGlJ,EAAE,CAACyD,IAAH,EAAb;;AACA,gBAAIyF,UAAU,KAAK,IAAnB,EAAyB;AACrB,kBAAI,OAAOA,UAAP,KAAsB,QAA1B,EAAoC;AAChC,uBAAO,CAAC;AAAE;AAAH,kBAAeA,UAAU,CAACvG,QAA1B,CAAP;AACH,eAFD,MAGK;AACD,uBAAO,CAAC;AAAE;AAAH,kBAAe,KAAf,CAAP;AACH;AACJ;;AACD,mBAAO,CAAC;AAAE;AAAH,cAAe,IAAf,CAAP;AAZR;AAcH,OAfiB,CAAlB;AAgBH,KAlBe,CAAhB;AAmBH,GApBD;AAqBA;;;;;;;;AAMA2F,EAAAA,OAAO,CAACzK,SAAR,CAAkByC,IAAlB,GAAyB,UAAU1C,GAAV,EAAe+C,SAAf,EAA0BsC,SAA1B,EAAqC;AAC1D,QAAItC,SAAS,KAAK,KAAK,CAAvB,EAA0B;AAAEA,MAAAA,SAAS,GAAG,SAAZ;AAAwB;;AACpD,WAAOrE,SAAS,CAAC,IAAD,EAAO,KAAK,CAAZ,EAAe,KAAK,CAApB,EAAuB,YAAY;AAC/C,UAAIkD,IAAJ,EAAUqB,WAAV,EAAuBqI,UAAvB;AACA,aAAO3M,WAAW,CAAC,IAAD,EAAO,UAAUyD,EAAV,EAAc;AACnC,gBAAQA,EAAE,CAACqD,KAAX;AACI,eAAK,CAAL;AACI,gBAAIzF,GAAG,CAACmM,UAAJ,CAAe,GAAf,CAAJ,EAAyB;AACrBnM,cAAAA,GAAG,GAAI,IAAIoM,GAAJ,CAAQpM,GAAR,EAAa0G,MAAM,CAAC2F,QAAP,CAAgBC,IAA7B,CAAD,CAAqC5I,QAA3C;AACH;;AACDQ,YAAAA,OAAO,CAACO,KAAR,CAAc,yCAAd,EAAyDzE,GAAzD,EAA8D+C,SAA9D;AACAnB,YAAAA,IAAI,GAAGsB,SAAS,CAAClD,GAAD,CAAhB;AACAiD,YAAAA,WAAW,GAAGjD,GAAG,CAAC6D,KAAJ,CAAU,GAAV,EAAe,CAAf,CAAd;AACA,mBAAO,CAAC;AAAE;AAAH,cAAc,KAAK4H,SAAL,CAAe7J,IAAf,CAAd,CAAP;;AACJ,eAAK,CAAL;AACI0J,YAAAA,UAAU,GAAGlJ,EAAE,CAACyD,IAAH,EAAb;;AACA,gBAAIyF,UAAU,KAAK,IAAnB,EAAyB;AACrB,kBAAI,OAAOA,UAAP,KAAsB,QAA1B,EAAoC;AAChC1J,gBAAAA,IAAI,GAAGsB,SAAS,CAACoI,UAAU,CAACvG,QAAZ,CAAhB;AACA9B,gBAAAA,WAAW,GAAGqI,UAAU,CAACvG,QAAX,CAAoBlB,KAApB,CAA0B,GAA1B,EAA+B,CAA/B,CAAd;AACH,eAHD,MAIK;AACD,uBAAO,CAAC;AAAE;AAAH,kBAAe,KAAf,CAAP;AACH;AACJ;;AACD,iBAAK0I,OAAL,CAAa3K,IAAb,EAAmBmB,SAAnB,EAA8BE,WAA9B;AACA,mBAAO,CAAC;AAAE;AAAH,cAAe,KAAKyI,iBAAL,CAAuB9J,IAAvB,EAA6BmB,SAA7B,EAAwCsC,SAAxC,CAAf,CAAP;AArBR;AAuBH,OAxBiB,CAAlB;AAyBH,KA3Be,CAAhB;AA4BH,GA9BD;AA+BA;;;;;AAGAqF,EAAAA,OAAO,CAACzK,SAAR,CAAkBgM,IAAlB,GAAyB,YAAY;AACjCvF,IAAAA,MAAM,CAAC9D,OAAP,CAAeqJ,IAAf;AACA,WAAOzF,OAAO,CAACC,OAAR,CAAgB,KAAK+F,WAArB,CAAP;AACH,GAHD;AAIA;;;AACA9B,EAAAA,OAAO,CAACzK,SAAR,CAAkBwM,UAAlB,GAA+B,YAAY;AACvC,WAAO/N,SAAS,CAAC,IAAD,EAAO,KAAK,CAAZ,EAAe,KAAK,CAApB,EAAuB,YAAY;AAC/C,aAAOC,WAAW,CAAC,IAAD,EAAO,UAAUyD,EAAV,EAAc;AACnC8B,QAAAA,OAAO,CAACO,KAAR,CAAc,cAAd,EAA8B,KAAK+G,OAAL,EAA9B;AACAtH,QAAAA,OAAO,CAACO,KAAR,CAAc,eAAd,EAA+B,KAAKoG,YAApC;AACA7G,QAAAA,WAAW,CAAC0F,UAAU,CAAC,KAAKH,EAAN,CAAX,CAAX;AACA3E,QAAAA,cAAc,CAACwE,aAAa,CAAC,KAAKG,EAAN,CAAd,CAAd;AACA,eAAO,CAAC;AAAE;AAAH,SAAP;AACH,OANiB,CAAlB;AAOH,KARe,CAAhB;AASH,GAVD;AAWA;;;AACAmB,EAAAA,OAAO,CAACzK,SAAR,CAAkByM,UAAlB,GAA+B,UAAU3J,SAAV,EAAqB;AAChD,WAAOrE,SAAS,CAAC,IAAD,EAAO,KAAK,CAAZ,EAAe,KAAK,CAApB,EAAuB,YAAY;AAC/C,UAAI0D,EAAJ,EAAQmC,GAAR,EAAae,MAAb,EAAqBrB,MAArB,EAA6BhC,KAA7B,EAAoCL,IAApC;;AACA,aAAOjD,WAAW,CAAC,IAAD,EAAO,UAAU0D,EAAV,EAAc;AACnC,gBAAQA,EAAE,CAACoD,KAAX;AACI,eAAK,CAAL;AACI,gBAAI,KAAKqF,IAAT,EAAe;AACX5G,cAAAA,OAAO,CAACyI,IAAR,CAAa,uDAAb;AACA,qBAAO,CAAC;AAAE;AAAH,gBAAe,KAAf,CAAP;AACH;;AACD,mBAAO,CAAC;AAAE;AAAH,cAAczG,YAAY,CAACQ,MAAM,CAACJ,QAAP,CAAgBC,IAAjB,CAA1B,CAAP;;AACJ,eAAK,CAAL;AACInE,YAAAA,EAAE,GAAGC,EAAE,CAACwD,IAAH,EAAL,EAAgBtB,GAAG,GAAGnC,EAAE,CAACmC,GAAzB,EAA8Be,MAAM,GAAGlD,EAAE,CAACkD,MAA1C;AACArB,YAAAA,MAAM,GAAGyF,UAAU,CAAC,KAAKH,EAAN,CAAnB;AACAtH,YAAAA,KAAK,GAAGoG,gBAAgB,CAAC9D,GAAD,EAAMN,MAAN,CAAxB;;AACA,gBAAI,CAAChC,KAAL,EAAY;AACRiC,cAAAA,OAAO,CAACyI,IAAR,CAAa,mCAAb,EAAkDpI,GAAG,CAACT,GAAJ,CAAQ,UAAU7E,CAAV,EAAa;AAAE,uBAAOA,CAAC,CAACuF,EAAT;AAAc,eAArC,CAAlD;AACA,qBAAO,CAAC;AAAE;AAAH,gBAAe,KAAf,CAAP;AACH;;AACD5C,YAAAA,IAAI,GAAGI,WAAW,CAACC,KAAD,CAAlB;;AACA,gBAAI,CAACL,IAAL,EAAW;AACPsC,cAAAA,OAAO,CAACyI,IAAR,CAAa,iFAAb;AACA,qBAAO,CAAC;AAAE;AAAH,gBAAe,KAAf,CAAP;AACH;;AACDzI,YAAAA,OAAO,CAACO,KAAR,CAAc,wCAAd,EAAwDF,GAAxD,EAA6D3C,IAA7D;AACA,iBAAK2K,OAAL,CAAa3K,IAAb,EAAmBmB,SAAnB;AACA,mBAAO,CAAC;AAAE;AAAH,cAAc,KAAK6J,iBAAL,CAAuBtH,MAAvB,EAA+BrD,KAA/B,EAAsCV,kBAAtC,EAA0DK,IAA1D,EAAgE,IAAhE,EAAsE2C,GAAG,CAAC5D,MAA1E,CAAd,CAAP;;AACJ,eAAK,CAAL;AACI0B,YAAAA,EAAE,CAACwD,IAAH;;AACA,mBAAO,CAAC;AAAE;AAAH,cAAe,IAAf,CAAP;AAzBR;AA2BH,OA5BiB,CAAlB;AA6BH,KA/Be,CAAhB;AAgCH,GAjCD;;AAkCA6E,EAAAA,OAAO,CAACzK,SAAR,CAAkBkL,iBAAlB,GAAsC,YAAY;AAC9C,QAAIvJ,IAAI,GAAG,KAAK4J,OAAL,EAAX;;AACA,QAAI5J,IAAI,IAAIuF,aAAa,CAACvF,IAAD,EAAOwH,aAAa,CAAC,KAAKG,EAAN,CAApB,CAAzB,EAAyD;AACrD,WAAKmC,iBAAL,CAAuB9J,IAAvB,EAA6BL,kBAA7B;AACH;AACJ,GALD;;AAMAmJ,EAAAA,OAAO,CAACzK,SAAR,CAAkBgL,eAAlB,GAAoC,YAAY;AAC5C,WAAO,KAAKS,iBAAL,CAAuB,KAAKF,OAAL,EAAvB,EAAuCjK,kBAAvC,CAAP;AACH,GAFD;;AAGAmJ,EAAAA,OAAO,CAACzK,SAAR,CAAkBsL,gBAAlB,GAAqC,YAAY;AAC7C,QAAIsB,GAAG,GAAGnG,MAAV;;AACA,QAAImG,GAAG,CAACjK,OAAJ,CAAYI,KAAZ,KAAsB,IAA1B,EAAgC;AAC5B,WAAKA,KAAL;AACA6J,MAAAA,GAAG,CAACjK,OAAJ,CAAYS,YAAZ,CAAyB,KAAKL,KAA9B,EAAqC6J,GAAG,CAACvG,QAAJ,CAAawG,KAAlD,EAAyDD,GAAG,CAACvG,QAAJ,CAAa+F,QAAb,IAAyBQ,GAAG,CAACvG,QAAJ,CAAa+F,QAAb,CAAsBC,IAAxG;AACH;;AACD,QAAItJ,KAAK,GAAG6J,GAAG,CAACjK,OAAJ,CAAYI,KAAxB;AACA,QAAI+H,SAAS,GAAG,KAAKA,SAArB;AACA,SAAKA,SAAL,GAAiB/H,KAAjB;;AACA,QAAIA,KAAK,GAAG+H,SAAR,IAAsB/H,KAAK,IAAI+H,SAAT,IAAsBA,SAAS,GAAG,CAA5D,EAAgE;AAC5D,aAAOvJ,qBAAP;AACH,KAFD,MAGK,IAAIwB,KAAK,GAAG+H,SAAZ,EAAuB;AACxB,aAAOtJ,kBAAP;AACH,KAFI,MAGA;AACD,aAAOF,kBAAP;AACH;AACJ,GAlBD;;AAmBAmJ,EAAAA,OAAO,CAACzK,SAAR,CAAkByL,iBAAlB,GAAsC,UAAU9J,IAAV,EAAgBmB,SAAhB,EAA2BsC,SAA3B,EAAsC;AACxE,WAAO3G,SAAS,CAAC,IAAD,EAAO,KAAK,CAAZ,EAAe,KAAK,CAApB,EAAuB,YAAY;AAC/C,UAAImG,SAAJ,EAAeE,QAAf,EAAyBgI,YAAzB,EAAuC9I,MAAvC,EAA+ChC,KAA/C;AACA,aAAOtD,WAAW,CAAC,IAAD,EAAO,UAAUyD,EAAV,EAAc;AACnC,YAAI,CAACR,IAAL,EAAW;AACPsC,UAAAA,OAAO,CAAC+B,KAAR,CAAc,iDAAd;AACA,iBAAO,CAAC;AAAE;AAAH,YAAe,KAAf,CAAP;AACH;;AACDpB,QAAAA,SAAS,GAAGuE,aAAa,CAAC,KAAKG,EAAN,CAAzB;AACAxE,QAAAA,QAAQ,GAAGoC,aAAa,CAACvF,IAAD,EAAOiD,SAAP,CAAxB;AACAkI,QAAAA,YAAY,GAAG,IAAf;;AACA,YAAIhI,QAAJ,EAAc;AACV,eAAKwH,OAAL,CAAaxH,QAAQ,CAACC,EAAtB,EAA0BjC,SAA1B;AACAgK,UAAAA,YAAY,GAAGhI,QAAQ,CAACE,IAAxB;AACArD,UAAAA,IAAI,GAAGmD,QAAQ,CAACC,EAAhB;AACH;;AACDf,QAAAA,MAAM,GAAGyF,UAAU,CAAC,KAAKH,EAAN,CAAnB;AACAtH,QAAAA,KAAK,GAAG2G,iBAAiB,CAAChH,IAAD,EAAOqC,MAAP,CAAzB;;AACA,YAAI,CAAChC,KAAL,EAAY;AACRiC,UAAAA,OAAO,CAAC+B,KAAR,CAAc,gDAAd;AACA,iBAAO,CAAC;AAAE;AAAH,YAAe,KAAf,CAAP;AACH,SAlBkC,CAmBnC;;;AACA,eAAO,CAAC;AAAE;AAAH,UAAe,KAAK2G,iBAAL,CAAuBtG,QAAQ,CAACC,IAAhC,EAAsCtE,KAAtC,EAA6Cc,SAA7C,EAAwDnB,IAAxD,EAA8DmL,YAA9D,EAA4E,CAA5E,EAA+E1H,SAA/E,CAAf,CAAP;AACH,OArBiB,CAAlB;AAsBH,KAxBe,CAAhB;AAyBH,GA1BD;;AA2BAqF,EAAAA,OAAO,CAACzK,SAAR,CAAkB2M,iBAAlB,GAAsC,UAAUzG,IAAV,EAAgBlE,KAAhB,EAAuBc,SAAvB,EAAkCnB,IAAlC,EAAwCmL,YAAxC,EAAsD5H,KAAtD,EAA6DE,SAA7D,EAAwE;AAC1G,QAAIF,KAAK,KAAK,KAAK,CAAnB,EAAsB;AAAEA,MAAAA,KAAK,GAAG,CAAR;AAAY;;AACpC,WAAOzG,SAAS,CAAC,IAAD,EAAO,KAAK,CAAZ,EAAe,KAAK,CAApB,EAAuB,YAAY;AAC/C,UAAIsO,MAAJ,EAAY5H,OAAZ,EAAqB6H,GAArB;AACA,aAAOtO,WAAW,CAAC,IAAD,EAAO,UAAUyD,EAAV,EAAc;AACnC,gBAAQA,EAAE,CAACqD,KAAX;AACI,eAAK,CAAL;AAAQ,mBAAO,CAAC;AAAE;AAAH,cAAc,KAAKyH,IAAL,EAAd,CAAP;;AACR,eAAK,CAAL;AACIF,YAAAA,MAAM,GAAG5K,EAAE,CAACyD,IAAH,EAAT;AACAT,YAAAA,OAAO,GAAG,KAAV;AACAhD,YAAAA,EAAE,CAACqD,KAAH,GAAW,CAAX;;AACJ,eAAK,CAAL;AACIrD,YAAAA,EAAE,CAACsD,IAAH,CAAQhD,IAAR,CAAa,CAAC,CAAD,EAAI,CAAJ,GAAS,CAAT,CAAb;;AACA,mBAAO,CAAC;AAAE;AAAH,cAAc,KAAKwC,aAAL,CAAmBiB,IAAnB,EAAyBlE,KAAzB,EAAgCc,SAAhC,EAA2CnB,IAA3C,EAAiDmL,YAAjD,EAA+D5H,KAA/D,EAAsEE,SAAtE,CAAd,CAAP;;AACJ,eAAK,CAAL;AACID,YAAAA,OAAO,GAAGhD,EAAE,CAACyD,IAAH,EAAV;AACA,mBAAO,CAAC;AAAE;AAAH,cAAc,CAAd,CAAP;;AACJ,eAAK,CAAL;AACIoH,YAAAA,GAAG,GAAG7K,EAAE,CAACyD,IAAH,EAAN;AACA3B,YAAAA,OAAO,CAAC+B,KAAR,CAAcgH,GAAd;AACA,mBAAO,CAAC;AAAE;AAAH,cAAc,CAAd,CAAP;;AACJ,eAAK,CAAL;AACID,YAAAA,MAAM;AACN,mBAAO,CAAC;AAAE;AAAH,cAAe5H,OAAf,CAAP;AAlBR;AAoBH,OArBiB,CAAlB;AAsBH,KAxBe,CAAhB;AAyBH,GA3BD;;AA4BAsF,EAAAA,OAAO,CAACzK,SAAR,CAAkBiN,IAAlB,GAAyB,YAAY;AACjC,WAAOxO,SAAS,CAAC,IAAD,EAAO,KAAK,CAAZ,EAAe,KAAK,CAApB,EAAuB,YAAY;AAC/C,UAAIyO,CAAJ,EAAO1G,OAAP;AACA,aAAO9H,WAAW,CAAC,IAAD,EAAO,UAAUyD,EAAV,EAAc;AACnC,gBAAQA,EAAE,CAACqD,KAAX;AACI,eAAK,CAAL;AACI0H,YAAAA,CAAC,GAAG,KAAKX,WAAT;AACA,iBAAKA,WAAL,GAAmB,IAAIhG,OAAJ,CAAY,UAAU3H,CAAV,EAAa;AAAE,qBAAO4H,OAAO,GAAG5H,CAAjB;AAAqB,aAAhD,CAAnB;AACA,gBAAI,EAAEsO,CAAC,KAAKhK,SAAR,CAAJ,EAAwB,OAAO,CAAC;AAAE;AAAH,cAAc,CAAd,CAAP;AACxB,mBAAO,CAAC;AAAE;AAAH,cAAcgK,CAAd,CAAP;;AACJ,eAAK,CAAL;AACI/K,YAAAA,EAAE,CAACyD,IAAH;;AACAzD,YAAAA,EAAE,CAACqD,KAAH,GAAW,CAAX;;AACJ,eAAK,CAAL;AAAQ,mBAAO,CAAC;AAAE;AAAH,cAAegB,OAAf,CAAP;AATZ;AAWH,OAZiB,CAAlB;AAaH,KAfe,CAAhB;AAgBH,GAjBD;;AAkBAiE,EAAAA,OAAO,CAACzK,SAAR,CAAkBwL,SAAlB,GAA8B,UAAUzG,EAAV,EAAcC,IAAd,EAAoB;AAC9C,QAAID,EAAE,KAAK,KAAK,CAAhB,EAAmB;AAAEA,MAAAA,EAAE,GAAG,KAAKwG,OAAL,EAAL;AAAsB;;AAC3C,QAAIvG,IAAI,KAAK,KAAK,CAAlB,EAAqB;AAAEA,MAAAA,IAAI,GAAG/B,SAAS,CAAC,KAAK2H,YAAN,CAAhB;AAAsC;;AAC7D,WAAOnM,SAAS,CAAC,IAAD,EAAO,KAAK,CAAZ,EAAe,KAAK,CAApB,EAAuB,YAAY;AAC/C,UAAIuF,MAAJ,EAAYmJ,OAAZ,EAAqBC,SAArB,EAAgCC,eAAhC,EAAiDC,eAAjD,EAAkEC,QAAlE,EAA4EpL,EAA5E,EAAgFqL,QAAhF,EAA0FpL,EAA1F;;AACA,aAAO1D,WAAW,CAAC,IAAD,EAAO,UAAU+O,EAAV,EAAc;AACnC,gBAAQA,EAAE,CAACjI,KAAX;AACI,eAAK,CAAL;AACI,gBAAI,CAACT,EAAD,IAAO,CAACC,IAAZ,EAAkB;AACd,qBAAO,CAAC;AAAE;AAAH,gBAAe,IAAf,CAAP;AACH;;AACDhB,YAAAA,MAAM,GAAGyF,UAAU,CAAC,KAAKH,EAAN,CAAnB;AACA6D,YAAAA,OAAO,GAAGxE,iBAAiB,CAAC5D,EAAD,EAAKf,MAAL,CAA3B;AACAoJ,YAAAA,SAAS,GAAGzE,iBAAiB,CAAC3D,IAAD,EAAOhB,MAAP,CAA7B;AACAqJ,YAAAA,eAAe,GAAGF,OAAO,IAAIA,OAAO,CAACA,OAAO,CAACzM,MAAR,GAAiB,CAAlB,CAAP,CAA4BsJ,WAAzD;AACAsD,YAAAA,eAAe,GAAGF,SAAS,IAAIA,SAAS,CAACA,SAAS,CAAC1M,MAAV,GAAmB,CAApB,CAAT,CAAgCqJ,WAA/D;AACA,gBAAI,CAACuD,eAAL,EAAsB,OAAO,CAAC;AAAE;AAAH,cAAc,CAAd,CAAP;AACtB,mBAAO,CAAC;AAAE;AAAH,cAAcA,eAAe,EAA7B,CAAP;;AACJ,eAAK,CAAL;AACInL,YAAAA,EAAE,GAAGsL,EAAE,CAAC7H,IAAH,EAAL;AACA,mBAAO,CAAC;AAAE;AAAH,cAAc,CAAd,CAAP;;AACJ,eAAK,CAAL;AACIzD,YAAAA,EAAE,GAAG,IAAL;AACAsL,YAAAA,EAAE,CAACjI,KAAH,GAAW,CAAX;;AACJ,eAAK,CAAL;AACI+H,YAAAA,QAAQ,GAAGpL,EAAX;;AACA,gBAAIoL,QAAQ,KAAK,KAAb,IAAsB,OAAOA,QAAP,KAAoB,QAA9C,EAAwD;AACpD,qBAAO,CAAC;AAAE;AAAH,gBAAeA,QAAf,CAAP;AACH;;AACD,gBAAI,CAACF,eAAL,EAAsB,OAAO,CAAC;AAAE;AAAH,cAAc,CAAd,CAAP;AACtB,mBAAO,CAAC;AAAE;AAAH,cAAcA,eAAe,EAA7B,CAAP;;AACJ,eAAK,CAAL;AACIjL,YAAAA,EAAE,GAAGqL,EAAE,CAAC7H,IAAH,EAAL;AACA,mBAAO,CAAC;AAAE;AAAH,cAAc,CAAd,CAAP;;AACJ,eAAK,CAAL;AACIxD,YAAAA,EAAE,GAAG,IAAL;AACAqL,YAAAA,EAAE,CAACjI,KAAH,GAAW,CAAX;;AACJ,eAAK,CAAL;AACIgI,YAAAA,QAAQ,GAAGpL,EAAX;;AACA,gBAAIoL,QAAQ,KAAK,KAAb,IAAsB,OAAOA,QAAP,KAAoB,QAA9C,EAAwD;AACpD,qBAAO,CAAC;AAAE;AAAH,gBAAeA,QAAf,CAAP;AACH;;AACD,mBAAO,CAAC;AAAE;AAAH,cAAe,IAAf,CAAP;AApCR;AAsCH,OAvCiB,CAAlB;AAwCH,KA1Ce,CAAhB;AA2CH,GA9CD;;AA+CA/C,EAAAA,OAAO,CAACzK,SAAR,CAAkBiF,aAAlB,GAAkC,UAAUiB,IAAV,EAAgBlE,KAAhB,EAAuBc,SAAvB,EAAkCnB,IAAlC,EAAwCmL,YAAxC,EAAsD5H,KAAtD,EAA6DE,SAA7D,EAAwE;AACtG,QAAIF,KAAK,KAAK,KAAK,CAAnB,EAAsB;AAAEA,MAAAA,KAAK,GAAG,CAAR;AAAY;;AACpC,WAAOzG,SAAS,CAAC,IAAD,EAAO,KAAK,CAAZ,EAAe,KAAK,CAApB,EAAuB,YAAY;AAC/C,UAAIiP,UAAJ,EAAgBvI,OAAhB;AACA,aAAOzG,WAAW,CAAC,IAAD,EAAO,UAAUyD,EAAV,EAAc;AACnC,gBAAQA,EAAE,CAACqD,KAAX;AACI,eAAK,CAAL;AACI,gBAAI,KAAKqF,IAAT,EAAe;AACX5G,cAAAA,OAAO,CAACyI,IAAR,CAAa,uDAAb;AACA,qBAAO,CAAC;AAAE;AAAH,gBAAe,KAAf,CAAP;AACH;;AACD,iBAAK7B,IAAL,GAAY,IAAZ;AACA6C,YAAAA,UAAU,GAAG,KAAKC,gBAAL,CAAsBhM,IAAtB,EAA4BmL,YAA5B,CAAb;;AACA,gBAAIY,UAAJ,EAAgB;AACZ,mBAAKhD,kBAAL,CAAwBvK,IAAxB,CAA6BuN,UAA7B;AACH;;AACD,mBAAO,CAAC;AAAE;AAAH,cAAczI,aAAa,CAACiB,IAAD,EAAOlE,KAAP,EAAcc,SAAd,EAAyBoC,KAAzB,EAAgC,KAAhC,EAAuCE,SAAvC,CAA3B,CAAP;;AACJ,eAAK,CAAL;AACID,YAAAA,OAAO,GAAGhD,EAAE,CAACyD,IAAH,EAAV;AACA,iBAAKiF,IAAL,GAAY,KAAZ;;AACA,gBAAI1F,OAAJ,EAAa;AACTlB,cAAAA,OAAO,CAACO,KAAR,CAAc,4BAAd,EAA4C7C,IAA5C;AACH,aALL,CAMI;;;AACA,gBAAI+L,UAAJ,EAAgB;AACZ,mBAAK/C,iBAAL,CAAuBxK,IAAvB,CAA4BuN,UAA5B;AACH;;AACD,mBAAO,CAAC;AAAE;AAAH,cAAevI,OAAf,CAAP;AAtBR;AAwBH,OAzBiB,CAAlB;AA0BH,KA5Be,CAAhB;AA6BH,GA/BD;;AAgCAsF,EAAAA,OAAO,CAACzK,SAAR,CAAkBsM,OAAlB,GAA4B,UAAU3K,IAAV,EAAgBmB,SAAhB,EAA2BE,WAA3B,EAAwC;AAChE,SAAKD,KAAL;AACAL,IAAAA,SAAS,CAAC+D,MAAM,CAAC9D,OAAR,EAAiB,KAAKC,IAAtB,EAA4B,KAAKC,OAAjC,EAA0ClB,IAA1C,EAAgDmB,SAAhD,EAA2D,KAAKC,KAAhE,EAAuEC,WAAvE,CAAT;AACH,GAHD;;AAIAyH,EAAAA,OAAO,CAACzK,SAAR,CAAkBuL,OAAlB,GAA4B,YAAY;AACpC,WAAOhI,QAAQ,CAACkD,MAAM,CAAC2F,QAAR,EAAkB,KAAKxJ,IAAvB,EAA6B,KAAKC,OAAlC,CAAf;AACH,GAFD;;AAGA4H,EAAAA,OAAO,CAACzK,SAAR,CAAkB2N,gBAAlB,GAAqC,UAAUhM,IAAV,EAAgBiM,gBAAhB,EAAkC;AACnE,QAAI5I,IAAI,GAAG,KAAK4F,YAAhB;AACA,QAAI7F,EAAE,GAAGtD,YAAY,CAACE,IAAD,CAArB;AACA,SAAKiJ,YAAL,GAAoB7F,EAApB;;AACA,QAAIA,EAAE,KAAKC,IAAX,EAAiB;AACb,aAAO,IAAP;AACH;;AACD,QAAI6I,cAAc,GAAGD,gBAAgB,GAAGnM,YAAY,CAACmM,gBAAD,CAAf,GAAoC,IAAzE;AACA,WAAO;AACH5I,MAAAA,IAAI,EAAEA,IADH;AAEH6I,MAAAA,cAAc,EAAEA,cAFb;AAGH9I,MAAAA,EAAE,EAAEA;AAHD,KAAP;AAKH,GAbD;;AAcAxE,EAAAA,MAAM,CAACQ,cAAP,CAAsB0J,OAAO,CAACzK,SAA9B,EAAyC,IAAzC,EAA+C;AAC3CgB,IAAAA,GAAG,EAAE,eAAY;AAAE,aAAO/B,UAAU,CAAC,IAAD,CAAjB;AAA0B,KADF;AAE3CgC,IAAAA,UAAU,EAAE,KAF+B;AAG3CC,IAAAA,YAAY,EAAE;AAH6B,GAA/C;AAKA,SAAOuJ,OAAP;AACH,CAnZ2B,EAA5B;;AAoZA,IAAIqD,aAAa,GAAG,6ZAApB;;AACA,IAAIC,UAAU;AAAG;AAAe,YAAY;AACxC,WAASA,UAAT,CAAoBlO,OAApB,EAA6B;AACzB,QAAI+L,KAAK,GAAG,IAAZ;;AACA/M,IAAAA,gBAAgB,CAAC,IAAD,EAAOgB,OAAP,CAAhB;AACA;;;;;AAIA,SAAKmO,eAAL,GAAuB,SAAvB;;AACA,SAAKC,OAAL,GAAe,UAAUtC,EAAV,EAAc;AACzBlM,MAAAA,OAAO,CAACmM,KAAK,CAACS,IAAP,EAAaV,EAAb,EAAiBC,KAAK,CAACoC,eAAvB,EAAwCpC,KAAK,CAACsC,eAA9C,CAAP;AACH,KAFD;AAGH;;AACDH,EAAAA,UAAU,CAAC/N,SAAX,CAAqBmO,MAArB,GAA8B,YAAY;AACtC,QAAIhM,EAAJ;;AACA,QAAIiM,IAAI,GAAG9O,UAAU,CAAC,IAAD,CAArB;AACA,QAAI+O,KAAK,GAAG;AACRhC,MAAAA,IAAI,EAAE,KAAKA,IADH;AAERiC,MAAAA,GAAG,EAAE,KAAKA,GAFF;AAGRC,MAAAA,MAAM,EAAE,KAAKA;AAHL,KAAZ;AAKA,WAAQrP,CAAC,CAACE,IAAD,EAAO;AAAE6O,MAAAA,OAAO,EAAE,KAAKA,OAAhB;AAAyBO,MAAAA,KAAK,EAAEjO,MAAM,CAAC4H,MAAP,CAAc5H,MAAM,CAAC4H,MAAP,CAAc,EAAd,EAAkBxI,kBAAkB,CAAC,KAAK8O,KAAN,CAApC,CAAd,GAAkEtM,EAAE,GAAG,EAAL,EAASA,EAAE,CAACiM,IAAD,CAAF,GAAW,IAApB,EAA0BjM,EAAE,CAAC,iBAAD,CAAF,GAAwB,IAAlD,EAAwDA,EAA1H;AAAhC,KAAP,EAAyKjD,CAAC,CAAC,GAAD,EAAMqB,MAAM,CAAC4H,MAAP,CAAc,EAAd,EAAkBkG,KAAlB,CAAN,EAAgCnP,CAAC,CAAC,MAAD,EAAS,IAAT,CAAjC,CAA1K,CAAT;AACH,GATD;;AAUA,SAAO6O,UAAP;AACH,CAxB+B,EAAhC;;AAyBAA,UAAU,CAACW,KAAX,GAAmBZ,aAAnB;AACA,SAASlO,KAAK,IAAI+O,SAAlB,EAA6BxN,aAAa,IAAIyN,kBAA9C,EAAkEpE,MAAM,IAAIqE,UAA5E,EAAwFd,UAAU,IAAIe,eAAtG","sourcesContent":["import { __awaiter, __generator, __spreadArrays } from \"tslib\";\nimport { r as registerInstance, e as createEvent, i as getElement, h, H as Host } from './index-44bf8136.js';\nimport { b as getIonMode } from './ionic-global-837be8f3.js';\nimport { e as debounce } from './helpers-5c745fbd.js';\nimport { o as openURL, c as createColorClasses } from './theme-3f0b0c04.js';\nvar Route = /** @class */ (function () {\n    function Route(hostRef) {\n        registerInstance(this, hostRef);\n        this.ionRouteDataChanged = createEvent(this, \"ionRouteDataChanged\", 7);\n        /**\n         * Relative path that needs to match in order for this route to apply.\n         *\n         * Accepts paths similar to expressjs so that you can define parameters\n         * in the url /foo/:bar where bar would be available in incoming props.\n         */\n        this.url = '';\n    }\n    Route.prototype.onUpdate = function (newValue) {\n        this.ionRouteDataChanged.emit(newValue);\n    };\n    Route.prototype.onComponentProps = function (newValue, oldValue) {\n        if (newValue === oldValue) {\n            return;\n        }\n        var keys1 = newValue ? Object.keys(newValue) : [];\n        var keys2 = oldValue ? Object.keys(oldValue) : [];\n        if (keys1.length !== keys2.length) {\n            this.onUpdate(newValue);\n            return;\n        }\n        for (var _i = 0, keys1_1 = keys1; _i < keys1_1.length; _i++) {\n            var key = keys1_1[_i];\n            if (newValue[key] !== oldValue[key]) {\n                this.onUpdate(newValue);\n                return;\n            }\n        }\n    };\n    Route.prototype.connectedCallback = function () {\n        this.ionRouteDataChanged.emit();\n    };\n    Object.defineProperty(Route, \"watchers\", {\n        get: function () {\n            return {\n                \"url\": [\"onUpdate\"],\n                \"component\": [\"onUpdate\"],\n                \"componentProps\": [\"onComponentProps\"]\n            };\n        },\n        enumerable: false,\n        configurable: true\n    });\n    return Route;\n}());\nvar RouteRedirect = /** @class */ (function () {\n    function RouteRedirect(hostRef) {\n        registerInstance(this, hostRef);\n        this.ionRouteRedirectChanged = createEvent(this, \"ionRouteRedirectChanged\", 7);\n    }\n    RouteRedirect.prototype.propDidChange = function () {\n        this.ionRouteRedirectChanged.emit();\n    };\n    RouteRedirect.prototype.connectedCallback = function () {\n        this.ionRouteRedirectChanged.emit();\n    };\n    Object.defineProperty(RouteRedirect, \"watchers\", {\n        get: function () {\n            return {\n                \"from\": [\"propDidChange\"],\n                \"to\": [\"propDidChange\"]\n            };\n        },\n        enumerable: false,\n        configurable: true\n    });\n    return RouteRedirect;\n}());\nvar ROUTER_INTENT_NONE = 'root';\nvar ROUTER_INTENT_FORWARD = 'forward';\nvar ROUTER_INTENT_BACK = 'back';\nvar generatePath = function (segments) {\n    var path = segments\n        .filter(function (s) { return s.length > 0; })\n        .join('/');\n    return '/' + path;\n};\nvar chainToPath = function (chain) {\n    var path = [];\n    for (var _i = 0, chain_1 = chain; _i < chain_1.length; _i++) {\n        var route = chain_1[_i];\n        for (var _a = 0, _b = route.path; _a < _b.length; _a++) {\n            var segment = _b[_a];\n            if (segment[0] === ':') {\n                var param = route.params && route.params[segment.slice(1)];\n                if (!param) {\n                    return null;\n                }\n                path.push(param);\n            }\n            else if (segment !== '') {\n                path.push(segment);\n            }\n        }\n    }\n    return path;\n};\nvar writePath = function (history, root, useHash, path, direction, state, queryString) {\n    var url = generatePath(__spreadArrays(parsePath(root), path));\n    if (useHash) {\n        url = '#' + url;\n    }\n    if (queryString !== undefined) {\n        url = url + '?' + queryString;\n    }\n    if (direction === ROUTER_INTENT_FORWARD) {\n        history.pushState(state, '', url);\n    }\n    else {\n        history.replaceState(state, '', url);\n    }\n};\nvar removePrefix = function (prefix, path) {\n    if (prefix.length > path.length) {\n        return null;\n    }\n    if (prefix.length <= 1 && prefix[0] === '') {\n        return path;\n    }\n    for (var i = 0; i < prefix.length; i++) {\n        if (prefix[i].length > 0 && prefix[i] !== path[i]) {\n            return null;\n        }\n    }\n    if (path.length === prefix.length) {\n        return [''];\n    }\n    return path.slice(prefix.length);\n};\nvar readPath = function (loc, root, useHash) {\n    var pathname = loc.pathname;\n    if (useHash) {\n        var hash = loc.hash;\n        pathname = (hash[0] === '#')\n            ? hash.slice(1)\n            : '';\n    }\n    var prefix = parsePath(root);\n    var path = parsePath(pathname);\n    return removePrefix(prefix, path);\n};\nvar parsePath = function (path) {\n    if (path == null) {\n        return [''];\n    }\n    var removeQueryString = path.split('?')[0];\n    var segments = removeQueryString.split('/')\n        .map(function (s) { return s.trim(); })\n        .filter(function (s) { return s.length > 0; });\n    if (segments.length === 0) {\n        return [''];\n    }\n    else {\n        return segments;\n    }\n};\nvar printRoutes = function (routes) {\n    console.group(\"[ion-core] ROUTES[\" + routes.length + \"]\");\n    var _loop_1 = function (chain) {\n        var path = [];\n        chain.forEach(function (r) { return path.push.apply(path, r.path); });\n        var ids = chain.map(function (r) { return r.id; });\n        console.debug(\"%c \" + generatePath(path), 'font-weight: bold; padding-left: 20px', '=>\\t', \"(\" + ids.join(', ') + \")\");\n    };\n    for (var _i = 0, routes_1 = routes; _i < routes_1.length; _i++) {\n        var chain = routes_1[_i];\n        _loop_1(chain);\n    }\n    console.groupEnd();\n};\nvar printRedirects = function (redirects) {\n    console.group(\"[ion-core] REDIRECTS[\" + redirects.length + \"]\");\n    for (var _i = 0, redirects_1 = redirects; _i < redirects_1.length; _i++) {\n        var redirect = redirects_1[_i];\n        if (redirect.to) {\n            console.debug('FROM: ', \"$c \" + generatePath(redirect.from), 'font-weight: bold', ' TO: ', \"$c \" + generatePath(redirect.to), 'font-weight: bold');\n        }\n    }\n    console.groupEnd();\n};\nvar writeNavState = function (root, chain, direction, index, changed, animation) {\n    if (changed === void 0) { changed = false; }\n    return __awaiter(void 0, void 0, void 0, function () {\n        var outlet, route, result, e_1;\n        return __generator(this, function (_a) {\n            switch (_a.label) {\n                case 0:\n                    _a.trys.push([0, 6, , 7]);\n                    outlet = searchNavNode(root);\n                    // make sure we can continue interacting the DOM, otherwise abort\n                    if (index >= chain.length || !outlet) {\n                        return [2 /*return*/, changed];\n                    }\n                    return [4 /*yield*/, outlet.componentOnReady()];\n                case 1:\n                    _a.sent();\n                    route = chain[index];\n                    return [4 /*yield*/, outlet.setRouteId(route.id, route.params, direction, animation)];\n                case 2:\n                    result = _a.sent();\n                    // if the outlet changed the page, reset navigation to neutral (no direction)\n                    // this means nested outlets will not animate\n                    if (result.changed) {\n                        direction = ROUTER_INTENT_NONE;\n                        changed = true;\n                    }\n                    return [4 /*yield*/, writeNavState(result.element, chain, direction, index + 1, changed, animation)];\n                case 3:\n                    // recursively set nested outlets\n                    changed = _a.sent();\n                    if (!result.markVisible) return [3 /*break*/, 5];\n                    return [4 /*yield*/, result.markVisible()];\n                case 4:\n                    _a.sent();\n                    _a.label = 5;\n                case 5: return [2 /*return*/, changed];\n                case 6:\n                    e_1 = _a.sent();\n                    console.error(e_1);\n                    return [2 /*return*/, false];\n                case 7: return [2 /*return*/];\n            }\n        });\n    });\n};\nvar readNavState = function (root) { return __awaiter(void 0, void 0, void 0, function () {\n    var ids, outlet, node, id;\n    return __generator(this, function (_a) {\n        switch (_a.label) {\n            case 0:\n                ids = [];\n                node = root;\n                _a.label = 1;\n            case 1:\n                if (!true) return [3 /*break*/, 5];\n                outlet = searchNavNode(node);\n                if (!outlet) return [3 /*break*/, 3];\n                return [4 /*yield*/, outlet.getRouteId()];\n            case 2:\n                id = _a.sent();\n                if (id) {\n                    node = id.element;\n                    id.element = undefined;\n                    ids.push(id);\n                }\n                else {\n                    return [3 /*break*/, 5];\n                }\n                return [3 /*break*/, 4];\n            case 3: return [3 /*break*/, 5];\n            case 4: return [3 /*break*/, 1];\n            case 5: return [2 /*return*/, { ids: ids, outlet: outlet }];\n        }\n    });\n}); };\nvar waitUntilNavNode = function () {\n    if (searchNavNode(document.body)) {\n        return Promise.resolve();\n    }\n    return new Promise(function (resolve) {\n        window.addEventListener('ionNavWillLoad', resolve, { once: true });\n    });\n};\nvar QUERY = ':not([no-router]) ion-nav, :not([no-router]) ion-tabs, :not([no-router]) ion-router-outlet';\nvar searchNavNode = function (root) {\n    if (!root) {\n        return undefined;\n    }\n    if (root.matches(QUERY)) {\n        return root;\n    }\n    var outlet = root.querySelector(QUERY);\n    return outlet ? outlet : undefined;\n};\nvar matchesRedirect = function (input, route) {\n    var from = route.from, to = route.to;\n    if (to === undefined) {\n        return false;\n    }\n    if (from.length > input.length) {\n        return false;\n    }\n    for (var i = 0; i < from.length; i++) {\n        var expected = from[i];\n        if (expected === '*') {\n            return true;\n        }\n        if (expected !== input[i]) {\n            return false;\n        }\n    }\n    return from.length === input.length;\n};\nvar routeRedirect = function (path, routes) {\n    return routes.find(function (route) { return matchesRedirect(path, route); });\n};\nvar matchesIDs = function (ids, chain) {\n    var len = Math.min(ids.length, chain.length);\n    var i = 0;\n    for (; i < len; i++) {\n        if (ids[i].toLowerCase() !== chain[i].id) {\n            break;\n        }\n    }\n    return i;\n};\nvar matchesPath = function (inputPath, chain) {\n    var segments = new RouterSegments(inputPath);\n    var matchesDefault = false;\n    var allparams;\n    for (var i = 0; i < chain.length; i++) {\n        var path = chain[i].path;\n        if (path[0] === '') {\n            matchesDefault = true;\n        }\n        else {\n            for (var _i = 0, path_1 = path; _i < path_1.length; _i++) {\n                var segment = path_1[_i];\n                var data = segments.next();\n                // data param\n                if (segment[0] === ':') {\n                    if (data === '') {\n                        return null;\n                    }\n                    allparams = allparams || [];\n                    var params = allparams[i] || (allparams[i] = {});\n                    params[segment.slice(1)] = data;\n                }\n                else if (data !== segment) {\n                    return null;\n                }\n            }\n            matchesDefault = false;\n        }\n    }\n    var matches = (matchesDefault)\n        ? matchesDefault === (segments.next() === '')\n        : true;\n    if (!matches) {\n        return null;\n    }\n    if (allparams) {\n        return chain.map(function (route, i) { return ({\n            id: route.id,\n            path: route.path,\n            params: mergeParams(route.params, allparams[i])\n        }); });\n    }\n    return chain;\n};\nvar mergeParams = function (a, b) {\n    if (!a && b) {\n        return b;\n    }\n    else if (a && !b) {\n        return a;\n    }\n    else if (a && b) {\n        return Object.assign(Object.assign({}, a), b);\n    }\n    return undefined;\n};\nvar routerIDsToChain = function (ids, chains) {\n    var match = null;\n    var maxMatches = 0;\n    var plainIDs = ids.map(function (i) { return i.id; });\n    for (var _i = 0, chains_1 = chains; _i < chains_1.length; _i++) {\n        var chain = chains_1[_i];\n        var score = matchesIDs(plainIDs, chain);\n        if (score > maxMatches) {\n            match = chain;\n            maxMatches = score;\n        }\n    }\n    if (match) {\n        return match.map(function (route, i) { return ({\n            id: route.id,\n            path: route.path,\n            params: mergeParams(route.params, ids[i] && ids[i].params)\n        }); });\n    }\n    return null;\n};\nvar routerPathToChain = function (path, chains) {\n    var match = null;\n    var matches = 0;\n    for (var _i = 0, chains_2 = chains; _i < chains_2.length; _i++) {\n        var chain = chains_2[_i];\n        var matchedChain = matchesPath(path, chain);\n        if (matchedChain !== null) {\n            var score = computePriority(matchedChain);\n            if (score > matches) {\n                matches = score;\n                match = matchedChain;\n            }\n        }\n    }\n    return match;\n};\nvar computePriority = function (chain) {\n    var score = 1;\n    var level = 1;\n    for (var _i = 0, chain_2 = chain; _i < chain_2.length; _i++) {\n        var route = chain_2[_i];\n        for (var _a = 0, _b = route.path; _a < _b.length; _a++) {\n            var path = _b[_a];\n            if (path[0] === ':') {\n                score += Math.pow(1, level);\n            }\n            else if (path !== '') {\n                score += Math.pow(2, level);\n            }\n            level++;\n        }\n    }\n    return score;\n};\nvar RouterSegments = /** @class */ (function () {\n    function RouterSegments(path) {\n        this.path = path.slice();\n    }\n    RouterSegments.prototype.next = function () {\n        if (this.path.length > 0) {\n            return this.path.shift();\n        }\n        return '';\n    };\n    return RouterSegments;\n}());\nvar readRedirects = function (root) {\n    return Array.from(root.children)\n        .filter(function (el) { return el.tagName === 'ION-ROUTE-REDIRECT'; })\n        .map(function (el) {\n        var to = readProp(el, 'to');\n        return {\n            from: parsePath(readProp(el, 'from')),\n            to: to == null ? undefined : parsePath(to),\n        };\n    });\n};\nvar readRoutes = function (root) {\n    return flattenRouterTree(readRouteNodes(root));\n};\nvar readRouteNodes = function (root, node) {\n    if (node === void 0) { node = root; }\n    return Array.from(node.children)\n        .filter(function (el) { return el.tagName === 'ION-ROUTE' && el.component; })\n        .map(function (el) {\n        var component = readProp(el, 'component');\n        if (component == null) {\n            throw new Error('component missing in ion-route');\n        }\n        return {\n            path: parsePath(readProp(el, 'url')),\n            id: component.toLowerCase(),\n            params: el.componentProps,\n            beforeLeave: el.beforeLeave,\n            beforeEnter: el.beforeEnter,\n            children: readRouteNodes(root, el)\n        };\n    });\n};\nvar readProp = function (el, prop) {\n    if (prop in el) {\n        return el[prop];\n    }\n    if (el.hasAttribute(prop)) {\n        return el.getAttribute(prop);\n    }\n    return null;\n};\nvar flattenRouterTree = function (nodes) {\n    var routes = [];\n    for (var _i = 0, nodes_1 = nodes; _i < nodes_1.length; _i++) {\n        var node = nodes_1[_i];\n        flattenNode([], routes, node);\n    }\n    return routes;\n};\nvar flattenNode = function (chain, routes, node) {\n    var s = chain.slice();\n    s.push({\n        id: node.id,\n        path: node.path,\n        params: node.params,\n        beforeLeave: node.beforeLeave,\n        beforeEnter: node.beforeEnter\n    });\n    if (node.children.length === 0) {\n        routes.push(s);\n        return;\n    }\n    for (var _i = 0, _a = node.children; _i < _a.length; _i++) {\n        var sub = _a[_i];\n        flattenNode(s, routes, sub);\n    }\n};\nvar Router = /** @class */ (function () {\n    function class_1(hostRef) {\n        registerInstance(this, hostRef);\n        this.ionRouteWillChange = createEvent(this, \"ionRouteWillChange\", 7);\n        this.ionRouteDidChange = createEvent(this, \"ionRouteDidChange\", 7);\n        this.previousPath = null;\n        this.busy = false;\n        this.state = 0;\n        this.lastState = 0;\n        /**\n         * By default `ion-router` will match the routes at the root path (\"/\").\n         * That can be changed when\n         *\n         */\n        this.root = '/';\n        /**\n         * The router can work in two \"modes\":\n         * - With hash: `/index.html#/path/to/page`\n         * - Without hash: `/path/to/page`\n         *\n         * Using one or another might depend in the requirements of your app and/or where it's deployed.\n         *\n         * Usually \"hash-less\" navigation works better for SEO and it's more user friendly too, but it might\n         * requires additional server-side configuration in order to properly work.\n         *\n         * On the otherside hash-navigation is much easier to deploy, it even works over the file protocol.\n         *\n         * By default, this property is `true`, change to `false` to allow hash-less URLs.\n         */\n        this.useHash = true;\n    }\n    class_1.prototype.componentWillLoad = function () {\n        return __awaiter(this, void 0, void 0, function () {\n            return __generator(this, function (_a) {\n                switch (_a.label) {\n                    case 0:\n                        console.debug('[ion-router] router will load');\n                        return [4 /*yield*/, waitUntilNavNode()];\n                    case 1:\n                        _a.sent();\n                        console.debug('[ion-router] found nav');\n                        return [4 /*yield*/, this.onRoutesChanged()];\n                    case 2:\n                        _a.sent();\n                        return [2 /*return*/];\n                }\n            });\n        });\n    };\n    class_1.prototype.componentDidLoad = function () {\n        window.addEventListener('ionRouteRedirectChanged', debounce(this.onRedirectChanged.bind(this), 10));\n        window.addEventListener('ionRouteDataChanged', debounce(this.onRoutesChanged.bind(this), 100));\n    };\n    class_1.prototype.onPopState = function () {\n        return __awaiter(this, void 0, void 0, function () {\n            var direction, path, canProceed;\n            return __generator(this, function (_a) {\n                switch (_a.label) {\n                    case 0:\n                        direction = this.historyDirection();\n                        path = this.getPath();\n                        return [4 /*yield*/, this.runGuards(path)];\n                    case 1:\n                        canProceed = _a.sent();\n                        if (canProceed !== true) {\n                            if (typeof canProceed === 'object') {\n                                path = parsePath(canProceed.redirect);\n                            }\n                            return [2 /*return*/, false];\n                        }\n                        console.debug('[ion-router] URL changed -> update nav', path, direction);\n                        return [2 /*return*/, this.writeNavStateRoot(path, direction)];\n                }\n            });\n        });\n    };\n    class_1.prototype.onBackButton = function (ev) {\n        var _this = this;\n        ev.detail.register(0, function (processNextHandler) {\n            _this.back();\n            processNextHandler();\n        });\n    };\n    /** @internal */\n    class_1.prototype.canTransition = function () {\n        return __awaiter(this, void 0, void 0, function () {\n            var canProceed;\n            return __generator(this, function (_a) {\n                switch (_a.label) {\n                    case 0: return [4 /*yield*/, this.runGuards()];\n                    case 1:\n                        canProceed = _a.sent();\n                        if (canProceed !== true) {\n                            if (typeof canProceed === 'object') {\n                                return [2 /*return*/, canProceed.redirect];\n                            }\n                            else {\n                                return [2 /*return*/, false];\n                            }\n                        }\n                        return [2 /*return*/, true];\n                }\n            });\n        });\n    };\n    /**\n     * Navigate to the specified URL.\n     *\n     * @param url The url to navigate to.\n     * @param direction The direction of the animation. Defaults to `\"forward\"`.\n     */\n    class_1.prototype.push = function (url, direction, animation) {\n        if (direction === void 0) { direction = 'forward'; }\n        return __awaiter(this, void 0, void 0, function () {\n            var path, queryString, canProceed;\n            return __generator(this, function (_a) {\n                switch (_a.label) {\n                    case 0:\n                        if (url.startsWith('.')) {\n                            url = (new URL(url, window.location.href)).pathname;\n                        }\n                        console.debug('[ion-router] URL pushed -> updating nav', url, direction);\n                        path = parsePath(url);\n                        queryString = url.split('?')[1];\n                        return [4 /*yield*/, this.runGuards(path)];\n                    case 1:\n                        canProceed = _a.sent();\n                        if (canProceed !== true) {\n                            if (typeof canProceed === 'object') {\n                                path = parsePath(canProceed.redirect);\n                                queryString = canProceed.redirect.split('?')[1];\n                            }\n                            else {\n                                return [2 /*return*/, false];\n                            }\n                        }\n                        this.setPath(path, direction, queryString);\n                        return [2 /*return*/, this.writeNavStateRoot(path, direction, animation)];\n                }\n            });\n        });\n    };\n    /**\n     * Go back to previous page in the window.history.\n     */\n    class_1.prototype.back = function () {\n        window.history.back();\n        return Promise.resolve(this.waitPromise);\n    };\n    /** @internal */\n    class_1.prototype.printDebug = function () {\n        return __awaiter(this, void 0, void 0, function () {\n            return __generator(this, function (_a) {\n                console.debug('CURRENT PATH', this.getPath());\n                console.debug('PREVIOUS PATH', this.previousPath);\n                printRoutes(readRoutes(this.el));\n                printRedirects(readRedirects(this.el));\n                return [2 /*return*/];\n            });\n        });\n    };\n    /** @internal */\n    class_1.prototype.navChanged = function (direction) {\n        return __awaiter(this, void 0, void 0, function () {\n            var _a, ids, outlet, routes, chain, path;\n            return __generator(this, function (_b) {\n                switch (_b.label) {\n                    case 0:\n                        if (this.busy) {\n                            console.warn('[ion-router] router is busy, navChanged was cancelled');\n                            return [2 /*return*/, false];\n                        }\n                        return [4 /*yield*/, readNavState(window.document.body)];\n                    case 1:\n                        _a = _b.sent(), ids = _a.ids, outlet = _a.outlet;\n                        routes = readRoutes(this.el);\n                        chain = routerIDsToChain(ids, routes);\n                        if (!chain) {\n                            console.warn('[ion-router] no matching URL for ', ids.map(function (i) { return i.id; }));\n                            return [2 /*return*/, false];\n                        }\n                        path = chainToPath(chain);\n                        if (!path) {\n                            console.warn('[ion-router] router could not match path because some required param is missing');\n                            return [2 /*return*/, false];\n                        }\n                        console.debug('[ion-router] nav changed -> update URL', ids, path);\n                        this.setPath(path, direction);\n                        return [4 /*yield*/, this.safeWriteNavState(outlet, chain, ROUTER_INTENT_NONE, path, null, ids.length)];\n                    case 2:\n                        _b.sent();\n                        return [2 /*return*/, true];\n                }\n            });\n        });\n    };\n    class_1.prototype.onRedirectChanged = function () {\n        var path = this.getPath();\n        if (path && routeRedirect(path, readRedirects(this.el))) {\n            this.writeNavStateRoot(path, ROUTER_INTENT_NONE);\n        }\n    };\n    class_1.prototype.onRoutesChanged = function () {\n        return this.writeNavStateRoot(this.getPath(), ROUTER_INTENT_NONE);\n    };\n    class_1.prototype.historyDirection = function () {\n        var win = window;\n        if (win.history.state === null) {\n            this.state++;\n            win.history.replaceState(this.state, win.document.title, win.document.location && win.document.location.href);\n        }\n        var state = win.history.state;\n        var lastState = this.lastState;\n        this.lastState = state;\n        if (state > lastState || (state >= lastState && lastState > 0)) {\n            return ROUTER_INTENT_FORWARD;\n        }\n        else if (state < lastState) {\n            return ROUTER_INTENT_BACK;\n        }\n        else {\n            return ROUTER_INTENT_NONE;\n        }\n    };\n    class_1.prototype.writeNavStateRoot = function (path, direction, animation) {\n        return __awaiter(this, void 0, void 0, function () {\n            var redirects, redirect, redirectFrom, routes, chain;\n            return __generator(this, function (_a) {\n                if (!path) {\n                    console.error('[ion-router] URL is not part of the routing set');\n                    return [2 /*return*/, false];\n                }\n                redirects = readRedirects(this.el);\n                redirect = routeRedirect(path, redirects);\n                redirectFrom = null;\n                if (redirect) {\n                    this.setPath(redirect.to, direction);\n                    redirectFrom = redirect.from;\n                    path = redirect.to;\n                }\n                routes = readRoutes(this.el);\n                chain = routerPathToChain(path, routes);\n                if (!chain) {\n                    console.error('[ion-router] the path does not match any route');\n                    return [2 /*return*/, false];\n                }\n                // write DOM give\n                return [2 /*return*/, this.safeWriteNavState(document.body, chain, direction, path, redirectFrom, 0, animation)];\n            });\n        });\n    };\n    class_1.prototype.safeWriteNavState = function (node, chain, direction, path, redirectFrom, index, animation) {\n        if (index === void 0) { index = 0; }\n        return __awaiter(this, void 0, void 0, function () {\n            var unlock, changed, e_2;\n            return __generator(this, function (_a) {\n                switch (_a.label) {\n                    case 0: return [4 /*yield*/, this.lock()];\n                    case 1:\n                        unlock = _a.sent();\n                        changed = false;\n                        _a.label = 2;\n                    case 2:\n                        _a.trys.push([2, 4, , 5]);\n                        return [4 /*yield*/, this.writeNavState(node, chain, direction, path, redirectFrom, index, animation)];\n                    case 3:\n                        changed = _a.sent();\n                        return [3 /*break*/, 5];\n                    case 4:\n                        e_2 = _a.sent();\n                        console.error(e_2);\n                        return [3 /*break*/, 5];\n                    case 5:\n                        unlock();\n                        return [2 /*return*/, changed];\n                }\n            });\n        });\n    };\n    class_1.prototype.lock = function () {\n        return __awaiter(this, void 0, void 0, function () {\n            var p, resolve;\n            return __generator(this, function (_a) {\n                switch (_a.label) {\n                    case 0:\n                        p = this.waitPromise;\n                        this.waitPromise = new Promise(function (r) { return resolve = r; });\n                        if (!(p !== undefined)) return [3 /*break*/, 2];\n                        return [4 /*yield*/, p];\n                    case 1:\n                        _a.sent();\n                        _a.label = 2;\n                    case 2: return [2 /*return*/, resolve];\n                }\n            });\n        });\n    };\n    class_1.prototype.runGuards = function (to, from) {\n        if (to === void 0) { to = this.getPath(); }\n        if (from === void 0) { from = parsePath(this.previousPath); }\n        return __awaiter(this, void 0, void 0, function () {\n            var routes, toChain, fromChain, beforeEnterHook, beforeLeaveHook, canLeave, _a, canEnter, _b;\n            return __generator(this, function (_c) {\n                switch (_c.label) {\n                    case 0:\n                        if (!to || !from) {\n                            return [2 /*return*/, true];\n                        }\n                        routes = readRoutes(this.el);\n                        toChain = routerPathToChain(to, routes);\n                        fromChain = routerPathToChain(from, routes);\n                        beforeEnterHook = toChain && toChain[toChain.length - 1].beforeEnter;\n                        beforeLeaveHook = fromChain && fromChain[fromChain.length - 1].beforeLeave;\n                        if (!beforeLeaveHook) return [3 /*break*/, 2];\n                        return [4 /*yield*/, beforeLeaveHook()];\n                    case 1:\n                        _a = _c.sent();\n                        return [3 /*break*/, 3];\n                    case 2:\n                        _a = true;\n                        _c.label = 3;\n                    case 3:\n                        canLeave = _a;\n                        if (canLeave === false || typeof canLeave === 'object') {\n                            return [2 /*return*/, canLeave];\n                        }\n                        if (!beforeEnterHook) return [3 /*break*/, 5];\n                        return [4 /*yield*/, beforeEnterHook()];\n                    case 4:\n                        _b = _c.sent();\n                        return [3 /*break*/, 6];\n                    case 5:\n                        _b = true;\n                        _c.label = 6;\n                    case 6:\n                        canEnter = _b;\n                        if (canEnter === false || typeof canEnter === 'object') {\n                            return [2 /*return*/, canEnter];\n                        }\n                        return [2 /*return*/, true];\n                }\n            });\n        });\n    };\n    class_1.prototype.writeNavState = function (node, chain, direction, path, redirectFrom, index, animation) {\n        if (index === void 0) { index = 0; }\n        return __awaiter(this, void 0, void 0, function () {\n            var routeEvent, changed;\n            return __generator(this, function (_a) {\n                switch (_a.label) {\n                    case 0:\n                        if (this.busy) {\n                            console.warn('[ion-router] router is busy, transition was cancelled');\n                            return [2 /*return*/, false];\n                        }\n                        this.busy = true;\n                        routeEvent = this.routeChangeEvent(path, redirectFrom);\n                        if (routeEvent) {\n                            this.ionRouteWillChange.emit(routeEvent);\n                        }\n                        return [4 /*yield*/, writeNavState(node, chain, direction, index, false, animation)];\n                    case 1:\n                        changed = _a.sent();\n                        this.busy = false;\n                        if (changed) {\n                            console.debug('[ion-router] route changed', path);\n                        }\n                        // emit did change\n                        if (routeEvent) {\n                            this.ionRouteDidChange.emit(routeEvent);\n                        }\n                        return [2 /*return*/, changed];\n                }\n            });\n        });\n    };\n    class_1.prototype.setPath = function (path, direction, queryString) {\n        this.state++;\n        writePath(window.history, this.root, this.useHash, path, direction, this.state, queryString);\n    };\n    class_1.prototype.getPath = function () {\n        return readPath(window.location, this.root, this.useHash);\n    };\n    class_1.prototype.routeChangeEvent = function (path, redirectFromPath) {\n        var from = this.previousPath;\n        var to = generatePath(path);\n        this.previousPath = to;\n        if (to === from) {\n            return null;\n        }\n        var redirectedFrom = redirectFromPath ? generatePath(redirectFromPath) : null;\n        return {\n            from: from,\n            redirectedFrom: redirectedFrom,\n            to: to,\n        };\n    };\n    Object.defineProperty(class_1.prototype, \"el\", {\n        get: function () { return getElement(this); },\n        enumerable: false,\n        configurable: true\n    });\n    return class_1;\n}());\nvar routerLinkCss = \":host{--background:transparent;--color:var(--ion-color-primary, #3880ff);background:var(--background);color:var(--color)}:host(.ion-color){color:var(--ion-color-base)}a{font-family:inherit;font-size:inherit;font-style:inherit;font-weight:inherit;letter-spacing:inherit;text-decoration:inherit;text-indent:inherit;text-overflow:inherit;text-transform:inherit;text-align:inherit;white-space:inherit;color:inherit}\";\nvar RouterLink = /** @class */ (function () {\n    function RouterLink(hostRef) {\n        var _this = this;\n        registerInstance(this, hostRef);\n        /**\n         * When using a router, it specifies the transition direction when navigating to\n         * another page using `href`.\n         */\n        this.routerDirection = 'forward';\n        this.onClick = function (ev) {\n            openURL(_this.href, ev, _this.routerDirection, _this.routerAnimation);\n        };\n    }\n    RouterLink.prototype.render = function () {\n        var _a;\n        var mode = getIonMode(this);\n        var attrs = {\n            href: this.href,\n            rel: this.rel,\n            target: this.target\n        };\n        return (h(Host, { onClick: this.onClick, class: Object.assign(Object.assign({}, createColorClasses(this.color)), (_a = {}, _a[mode] = true, _a['ion-activatable'] = true, _a)) }, h(\"a\", Object.assign({}, attrs), h(\"slot\", null))));\n    };\n    return RouterLink;\n}());\nRouterLink.style = routerLinkCss;\nexport { Route as ion_route, RouteRedirect as ion_route_redirect, Router as ion_router, RouterLink as ion_router_link };\n"]},"metadata":{},"sourceType":"module"}