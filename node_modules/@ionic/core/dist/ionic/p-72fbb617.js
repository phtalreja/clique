import{b as t,c as e}from"./p-0955e8cf.js";import{g as o}from"./p-01cf4201.js";import{OVERLAY_BACK_BUTTON_PRIORITY as n}from"./p-761d1bee.js";let s=0;const a=new WeakMap,i=t=>({create:e=>y(t,e),dismiss:(e,o,n)=>h(document,e,o,t,n),getTop:async()=>x(document,t)}),r=i("ion-alert"),c=i("ion-action-sheet"),d=i("ion-loading"),u=i("ion-modal"),p=i("ion-picker"),l=i("ion-popover"),m=i("ion-toast"),f=t=>{"undefined"!=typeof document&&b(document);const e=s++;t.overlayIndex=e,t.hasAttribute("id")||(t.id="ion-overlay-"+e)},y=(t,e)=>"undefined"!=typeof customElements?customElements.whenDefined(t).then(()=>{const o=document.createElement(t);return o.classList.add("overlay-hidden"),Object.assign(o,e),w(document).appendChild(o),o.componentOnReady()}):Promise.resolve(),v='[tabindex]:not([tabindex^="-"]), input:not([type=hidden]), textarea, button, select, .ion-focusable',b=t=>{0===s&&(s=1,t.addEventListener("focus",e=>((t,e)=>{const n=x(e),s=t.target;if(n&&s)if(n===s)n.lastFocus=void 0;else{const t=o(n).querySelector(".ion-overlay-wrapper");if(!t)return;if(t.contains(s))n.lastFocus=s;else{const o=n.lastFocus;((t,e)=>{let o=t.querySelector(v);const n=o&&o.shadowRoot;n&&(o=n.querySelector("input:not([type=hidden]), textarea, button, select")||o),o?o.focus():e.focus()})(t,n),o===e.activeElement&&((t,e)=>{const o=Array.from(t.querySelectorAll(v));let n=o.length>0?o[o.length-1]:null;const s=n&&n.shadowRoot;s&&(n=s.querySelector("input:not([type=hidden]), textarea, button, select")||n),n?n.focus():e.focus()})(t,n),n.lastFocus=e.activeElement}}})(e,t),!0),t.addEventListener("ionBackButton",e=>{const o=x(t);o&&o.backdropDismiss&&e.detail.register(n,()=>o.dismiss(void 0,G))}),t.addEventListener("keyup",e=>{if("Escape"===e.key){const e=x(t);e&&e.backdropDismiss&&e.dismiss(void 0,G)}}))},h=(t,e,o,n,s)=>{const a=x(t,n,s);return a?a.dismiss(e,o):Promise.reject("overlay does not exist")},x=(t,e,o)=>{const n=((t,e)=>(void 0===e&&(e="ion-alert,ion-action-sheet,ion-loading,ion-modal,ion-picker,ion-popover,ion-toast"),Array.from(t.querySelectorAll(e)).filter(t=>t.overlayIndex>0)))(t,e);return void 0===o?n[n.length-1]:n.find(t=>t.id===o)},g=async(o,n,s,a,i)=>{if(o.presented)return;o.presented=!0,o.willPresent.emit();const r=t(o),c=o.enterAnimation?o.enterAnimation:e.get(n,"ios"===r?s:a);await j(o,c,o.el,i)&&o.didPresent.emit(),o.keyboardClose&&o.el.focus()},k=async(o,n,s,i,r,c,d)=>{if(!o.presented)return!1;o.presented=!1;try{o.el.style.setProperty("pointer-events","none"),o.willDismiss.emit({data:n,role:s});const u=t(o),p=o.leaveAnimation?o.leaveAnimation:e.get(i,"ios"===u?r:c);"gesture"!==s&&await j(o,p,o.el,d),o.didDismiss.emit({data:n,role:s}),a.delete(o)}catch(u){console.error(u)}return o.el.remove(),!0},w=t=>t.querySelector("ion-app")||t.body,j=async(t,o,n,s)=>{n.classList.remove("overlay-hidden");const i=o(n.shadowRoot||t.el,s);t.animated&&e.getBoolean("animated",!0)||i.duration(0),t.keyboardClose&&i.beforeAddWrite(()=>{const t=n.ownerDocument.activeElement;t&&t.matches("input, ion-input, ion-textarea")&&t.blur()});const r=a.get(t)||[];return a.set(t,[...r,i]),await i.play(),!0},B=(t,e)=>{let o;const n=new Promise(t=>o=t);return E(t,e,t=>{o(t.detail)}),n},E=(t,e,o)=>{const n=s=>{t.removeEventListener(e,n),o(s)};t.addEventListener(e,n)},P=t=>"cancel"===t||t===G,A=t=>t(),z=(t,o)=>{if("function"==typeof t)return e.get("_zoneGate",A)(()=>{try{return t(o)}catch(e){console.error(e)}})},G="backdrop";export{G as B,r as a,c as b,l as c,g as d,f as e,k as f,B as g,a as h,P as i,d as l,u as m,p,z as s,m as t}